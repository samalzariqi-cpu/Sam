import os
import glob
import time

def clean_storage():
    print("๐ ุจุฏุก ุนูููุฉ ูุณุญ ุงููููุงุช ุงููุจูุฑุฉ ูุงููุคูุชุฉ...")
    
    # ูุงุฆูุฉ ุจูู ุงูุตูุบ ุงูุชู ุชุณุจุจ ุงูุชูุงุก ุงูุฐุงูุฑุฉ (ููุฏููุ ุตูุชุ ุตูุฑ)
    target_extensions = [
        '*.mp4', '*.mkv', '*.avi', '*.mov', '*.flv',  # ููุฏูููุงุช
        '*.mp3', '*.ogg', '*.wav', '*.m4a',           # ุตูุชูุงุช
        '*.jpg', '*.png', '*.jpeg', '*.webp',         # ุตูุฑ
        '*.tmp', '*.temp', '*.cache'                  # ูููุงุช ูุคูุชุฉ
    ]
    
    deleted_files = 0
    freed_space_mb = 0.0
    
    # ุงูุจุญุซ ูู ุงููุฌูุฏ ุงูุญุงูู
    for ext in target_extensions:
        files = glob.glob(ext)
        for file_path in files:
            try:
                # ุญุณุงุจ ุงูุญุฌู ูุจู ุงูุญุฐู (ุจุงูููุฌุงุจุงูุช)
                size_mb = os.path.getsize(file_path) / (1024 * 1024)
                
                # ุชูููุฐ ุงูุญุฐู
                os.remove(file_path)
                
                print(f"๐๏ธ ุชู ุญุฐู ุงูููู: {file_path} (ุงูุญุฌู: {size_mb:.2f} MB)")
                deleted_files += 1
                freed_space_mb += size_mb
                
            except Exception as e:
                print(f"โ๏ธ ุชุนุฐุฑ ุญุฐู {file_path}: {e}")
    
    print("-" * 40)
    if deleted_files > 0:
        print(f"โ ุชูุช ุนูููุฉ ุงูุชูุธูู ุจูุฌุงุญ!")
        print(f"๐ ุนุฏุฏ ุงููููุงุช ุงูุชู ุญูุฐูุช: {deleted_files}")
        print(f"๐พ ุงููุณุงุญุฉ ุงูุชู ุชู ุชุญุฑูุฑูุง: {freed_space_mb:.2f} MB")
    else:
        print("โจ ุงูุงุณุชุถุงูุฉ ูุธููุฉุ ูุง ุชูุฌุฏ ูููุงุช ููุฏูู ุฃู ุตูุฑ ุนุงููุฉ.")
    print("-" * 40)

if __name__ == "__main__":
    # ุงุณุชุฏุนุงุก ุงูุฏุงูุฉ ููุฑ ุงูุชุดุบูู
    clean_storage()
    
    print("๐ด ุณูุจูู ุงูููุฏ ูุนูู ููุฏุฉ 5 ุฏูุงุฆู ูุชุฑุงูู ูุฑุตุฉ ูุฑุคูุฉ ุงููุชุงุฆุฌ ูู Logs...")
    # ูุฐุง ุงูุงูุชุธุงุฑ ููุท ููู ูุง ูุนูุฏ Render ุชุดุบูู ุงูููุฏ ููุฑุงู ููุณูุญ ูู ุจูุฑุงุกุฉ ุงูุณุฌู
    time.sleep(300)
