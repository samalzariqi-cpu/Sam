#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
ŸÖŸÑŸÅ ŸÖÿØŸÖÿ¨ - 1 ÿ®Ÿàÿ™
ÿ™ŸÖ ÿßŸÑÿØŸÖÿ¨ ÿ™ŸÑŸÇÿßÿ¶ŸäÿßŸã ŸÖŸÜ ÿ¨ŸÖŸäÿπ ŸÖŸÑŸÅÿßÿ™ .py
ŸÖÿπ Flask - ŸÑŸÑÿßÿ≥ÿ™ÿ∂ÿßŸÅÿßÿ™ ÿßŸÑÿ™Ÿä ÿ™ÿ≥ŸÖÿ≠ ÿ®ŸÄ Webserver
"""
import os, sys, threading, time, base64
import types
from flask import Flask, jsonify
from datetime import datetime

# Flask Application
app = Flask(__name__)

# ŸÖÿ™ÿ∫Ÿäÿ± ŸÑÿ≠ŸÅÿ∏ ÿ≠ÿßŸÑÿ© ÿßŸÑÿ®Ÿàÿ™ÿßÿ™
bots_status = {}
start_time = None

@app.route("/")
def home():
    """ÿßŸÑÿµŸÅÿ≠ÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ© - ÿ™ÿπÿ±ÿ∂ ÿ≠ÿßŸÑÿ© ÿ¨ŸÖŸäÿπ ÿßŸÑÿ®Ÿàÿ™ÿßÿ™"""
    global start_time
    uptime = str(datetime.now() - start_time).split(".")[0] if start_time else "0"
    
    html = """
    <!DOCTYPE html>
    <html dir="rtl" lang="ar">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>ü§ñ ŸÜÿ∏ÿßŸÖ ÿ•ÿØÿßÿ±ÿ© ÿßŸÑÿ®Ÿàÿ™ÿßÿ™</title>
        <style>
            * {{
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }}
            body {{
                font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                min-height: 100vh;
                display: flex;
                justify-content: center;
                align-items: center;
                padding: 20px;
            }}
            .container {{
                background: white;
                border-radius: 20px;
                box-shadow: 0 20px 60px rgba(0,0,0,0.3);
                padding: 40px;
                max-width: 600px;
                width: 100%;
            }}
            h1 {{
                color: #667eea;
                text-align: center;
                margin-bottom: 10px;
                font-size: 2em;
            }}
            .uptime {{
                text-align: center;
                color: #666;
                margin-bottom: 30px;
                font-size: 0.9em;
            }}
            .status {{
                background: #f8f9fa;
                border-radius: 15px;
                padding: 25px;
            }}
            .status h2 {{
                color: #10b981;
                text-align: center;
                margin-bottom: 20px;
            }}
            .bot-item {{
                background: white;
                border-radius: 10px;
                padding: 15px;
                margin-bottom: 10px;
                display: flex;
                align-items: center;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            }}
            .bot-icon {{
                font-size: 2em;
                margin-left: 15px;
            }}
            .bot-info {{
                flex: 1;
            }}
            .bot-name {{
                font-weight: bold;
                color: #333;
                font-size: 1.1em;
            }}
            .bot-status {{
                color: #10b981;
                font-size: 0.9em;
                margin-top: 5px;
            }}
            .footer {{
                text-align: center;
                margin-top: 30px;
                color: #666;
                font-size: 0.9em;
            }}
        </style>
    </head>
    <body>
        <div class="container">
            <h1>ü§ñ ŸÜÿ∏ÿßŸÖ ÿ•ÿØÿßÿ±ÿ© ÿßŸÑÿ®Ÿàÿ™ÿßÿ™</h1>
            <div class="uptime">‚è±Ô∏è ŸàŸÇÿ™ ÿßŸÑÿ™ÿ¥ÿ∫ŸäŸÑ: {uptime}</div>
            
            <div class="status">
                <h2>‚úÖ ÿ¨ŸÖŸäÿπ ÿßŸÑÿ®Ÿàÿ™ÿßÿ™ ÿ™ÿπŸÖŸÑ (1 ÿ®Ÿàÿ™)</h2>
                <div class="bot-item">
                    <div class="bot-icon">ü§ñ</div>
                    <div class="bot-info">
                        <div class="bot-name">2.py</div>
                        <div class="bot-status">‚úì ŸäÿπŸÖŸÑ ÿ®ÿ¥ŸÉŸÑ ÿ∑ÿ®ŸäÿπŸä</div>
                    </div>
                </div>
            </div>
            
            <div class="footer">
                Made with ‚ù§Ô∏è | Powered by Flask + Telegram Bot
            </div>
        </div>
    </body>
    </html>
    """
    return html

@app.route("/status")
def status():
    """API endpoint - Ÿäÿπÿ±ÿ∂ ÿ≠ÿßŸÑÿ© ÿßŸÑÿ®Ÿàÿ™ÿßÿ™ ÿ®ÿµŸäÿ∫ÿ© JSON"""
    return jsonify({
        "total_bots": 1,
        "status": "running",
        "bots": bots_status,
        "uptime": str(datetime.now() - start_time) if start_time else "0"
    })

@app.route("/health")
def health():
    """Health check endpoint"""
    return jsonify({"status": "healthy"}), 200

def run_flask():
    """ÿ™ÿ¥ÿ∫ŸäŸÑ Flask server"""
    port = int(os.environ.get("PORT", 8080))
    app.run(host="0.0.0.0", port=port, debug=False, use_reloader=False)

# ÿ£ŸÉŸàÿßÿØ ÿßŸÑÿ®Ÿàÿ™ÿßÿ™
BOTS_CODE = {
    1: "IyEvdXNyL2Jpbi9lbnYgcHl0aG9uMwoiIiIK8J+OrCDYttin2LrYtyDYp9mE2YHZitiv2YrZiNmH2KfYqiDYp9mE2LTYp9mF2YQgLSBUZWxlZ3JhbSBCb3QK2YPZiNivINmD2KfZhdmEINmB2Yog2YXZhNmBINmI2KfYrdivIC0g2KzYp9mH2LIg2YTZhNiq2LTYutmK2YQg2YXYqNin2LTYsdipIQoK2KfZhNmF2YXZitiy2KfYqjoK4pyFINiv2LnZhSBHb29nbGUgRHJpdmUg2YjYp9mE2LHZiNin2KjYtyDYp9mE2YXYqNin2LTYsdipCuKchSDYtti62Lcg2YHZitiv2YrZiNmH2KfYqiDYqNij2Yog2K3YrNmFICg1MCBNQiAtIDYwMCBNQispCuKchSA0INmF2LPYqtmI2YrYp9iqINis2YjYr9ipCuKchSDYqtit2YXZitmEINiw2YPZiiDYqNin2YTZgti32LkgKGNodW5rcykK4pyFINi52LHYtiDYp9mE2KrZgtiv2YUg2KfZhNmF2KjYp9i02LEKCtin2YTZhdiq2LfZhNio2KfYqjoKLSBQeXRob24gMy44KwotIEZGbXBlZyAoc3VkbyBhcHQgaW5zdGFsbCBmZm1wZWcpCi0gcGlwIGluc3RhbGwgcHl0aG9uLXRlbGVncmFtLWJvdCByZXF1ZXN0cwoK2KfZhNin2LPYqtiu2K/Yp9mFOgoxLiDYudiv2YQgQk9UX1RPS0VOINij2K/Zhtin2YcKMi4g2LTYutmEOiBweXRob24zIHZpZGVvX2JvdC5weQozLiDYo9ix2LPZhCDYsdin2KjYtyDYp9mE2YHZitiv2YrZiCDZhNmE2KjZiNiqCiIiIgoKaW1wb3J0IG9zCmltcG9ydCBhc3luY2lvCmltcG9ydCByZXF1ZXN0cwppbXBvcnQgc3VicHJvY2VzcwppbXBvcnQgcmUKaW1wb3J0IHRpbWUKaW1wb3J0IGxvZ2dpbmcKZnJvbSBwYXRobGliIGltcG9ydCBQYXRoCmZyb20gdGVsZWdyYW0gaW1wb3J0IFVwZGF0ZSwgSW5saW5lS2V5Ym9hcmRCdXR0b24sIElubGluZUtleWJvYXJkTWFya3VwCmZyb20gdGVsZWdyYW0uZXh0IGltcG9ydCBBcHBsaWNhdGlvbiwgQ29tbWFuZEhhbmRsZXIsIE1lc3NhZ2VIYW5kbGVyLCBDYWxsYmFja1F1ZXJ5SGFuZGxlciwgQ29udGV4dFR5cGVzLCBmaWx0ZXJzCgojID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KIyDimpnvuI8g2KfZhNil2LnYr9in2K/Yp9iqIC0g2LnYr9mEINmH2YbYpyDZgdmC2LchCiMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoKQk9UX1RPS0VOID0gIjg1MDQ2NDg1NTA6QUFHSDRUbzR2UnQ3M0YwZU9ISEJSM0JzRDlJU2EtMHpBdEkiICAjIPCfkYgg2LbYuSDYqtmI2YPZhiDYp9mE2KjZiNiqINmH2YbYpwpURU1QX0RJUiA9ICIuL3RlbXBfdmlkZW9zIiAgIyDZhdis2YTYryDYp9mE2YXZhNmB2KfYqiDYp9mE2YXYpNmC2KrYqQpNQVhfVEVMRUdSQU1fU0laRV9NQiA9IDUwICAjINit2K8g2LHZgdi5INin2YTZhdmE2YHYp9iqINmB2YogVGVsZWdyYW0KCiMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQojIPCfk50g2KXYudiv2KfYryDYp9mE2KrYs9is2YrZhCAoTG9nZ2luZykKIyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Cgpsb2dnaW5nLmJhc2ljQ29uZmlnKAogICAgZm9ybWF0PSclKGFzY3RpbWUpcyAtICUobmFtZSlzIC0gJShsZXZlbG5hbWUpcyAtICUobWVzc2FnZSlzJywKICAgIGxldmVsPWxvZ2dpbmcuSU5GTwopCmxvZ2dlciA9IGxvZ2dpbmcuZ2V0TG9nZ2VyKF9fbmFtZV9fKQoKIyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiMg8J+OrCDZgdim2Kkg2LbYp9i62Lcg2KfZhNmB2YrYr9mK2YjZh9in2KoKIyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CgpjbGFzcyBWaWRlb0NvbXByZXNzb3I6CiAgICAiIiLZgdim2Kkg2LTYp9mF2YTYqSDZhNiq2K3ZhdmK2YQg2YjYtti62Lcg2KfZhNmB2YrYr9mK2YjZh9in2KoiIiIKICAgIAogICAgZGVmIF9faW5pdF9fKHNlbGYsIHRlbXBfZGlyPVRFTVBfRElSKToKICAgICAgICAiIiLYqtmH2YrYptipINin2YTYttin2LrYtyIiIgogICAgICAgIHNlbGYudGVtcF9kaXIgPSBQYXRoKHRlbXBfZGlyKQogICAgICAgIHNlbGYudGVtcF9kaXIubWtkaXIoZXhpc3Rfb2s9VHJ1ZSkKICAgICAgICBsb2dnZXIuaW5mbyhmIvCfk4Eg2KrZhSDYpdmG2LTYp9ihINmF2KzZhNivINmF2KTZgtiqOiB7c2VsZi50ZW1wX2Rpcn0iKQogICAgCiAgICBkZWYgZXh0cmFjdF9nb29nbGVfZHJpdmVfaWQoc2VsZiwgdXJsKToKICAgICAgICAiIiLYp9iz2KrYrtix2KfYrCDZhdi52LHZgSDYp9mE2YXZhNmBINmF2YYg2LHYp9io2LcgR29vZ2xlIERyaXZlIiIiCiAgICAgICAgcGF0dGVybnMgPSBbCiAgICAgICAgICAgIHInaWQ9KFthLXpBLVowLTlfLV0rKScsCiAgICAgICAgICAgIHInL2QvKFthLXpBLVowLTlfLV0rKScsCiAgICAgICAgICAgIHInb3Blblw/aWQ9KFthLXpBLVowLTlfLV0rKScsCiAgICAgICAgXQogICAgICAgIAogICAgICAgIGZvciBwYXR0ZXJuIGluIHBhdHRlcm5zOgogICAgICAgICAgICBtYXRjaCA9IHJlLnNlYXJjaChwYXR0ZXJuLCB1cmwpCiAgICAgICAgICAgIGlmIG1hdGNoOgogICAgICAgICAgICAgICAgcmV0dXJuIG1hdGNoLmdyb3VwKDEpCiAgICAgICAgcmV0dXJuIE5vbmUKICAgIAogICAgZGVmIGdldF9nb29nbGVfZHJpdmVfZG93bmxvYWRfdXJsKHNlbGYsIGZpbGVfaWQpOgogICAgICAgICIiItin2YTYrdi12YjZhCDYudmE2Ykg2LHYp9io2Lcg2KfZhNiq2K3ZhdmK2YQg2KfZhNmF2KjYp9i02LEg2YXZhiBHb29nbGUgRHJpdmUiIiIKICAgICAgICByZXR1cm4gZiJodHRwczovL2RyaXZlLmdvb2dsZS5jb20vdWM/aWQ9e2ZpbGVfaWR9JmV4cG9ydD1kb3dubG9hZCZjb25maXJtPXQiCiAgICAKICAgIGRlZiBfZG93bmxvYWRfZnJvbV9nb29nbGVfZHJpdmUoc2VsZiwgZmlsZV9pZCwgb3V0cHV0X3BhdGgsIGNodW5rX3NpemU9MzI3NjgpOgogICAgICAgICIiIgogICAgICAgINiq2K3ZhdmK2YQg2K7Yp9i1INmF2YYgR29vZ2xlIERyaXZlINmF2Lkg2YXYudin2YTYrNipINis2YXZiti5INij2YbZiNin2Lkg2KfZhNmF2YTZgdin2KoKICAgICAgICDZitiv2LnZhSDZhdmE2YHYp9iqINmF2YYgMSBNQiDYrdiq2YkgMiBHQgogICAgICAgICIiIgogICAgICAgIGxvZ2dlci5pbmZvKGYi8J+UhCDZhdit2KfZiNmE2Kkg2KfZhNiq2K3ZhdmK2YQg2YXZhiBHb29nbGUgRHJpdmUuLi4iKQogICAgICAgIAogICAgICAgIHRyeToKICAgICAgICAgICAgIyDYp9iz2KrYrtiv2KfZhSBnZG93biDYpdiw2Kcg2YPYp9mGINmF2KrZiNmB2LHYp9mLICjYo9mB2LbZhCDYt9ix2YrZgtipKQogICAgICAgICAgICBpbXBvcnQgZ2Rvd24KICAgICAgICAgICAgbG9nZ2VyLmluZm8oIuKchSDYp9iz2KrYrtiv2KfZhSBnZG93biDZhNmE2KrYrdmF2YrZhC4uLiIpCiAgICAgICAgICAgIAogICAgICAgICAgICB1cmwgPSBmImh0dHBzOi8vZHJpdmUuZ29vZ2xlLmNvbS91Yz9pZD17ZmlsZV9pZH0iCiAgICAgICAgICAgIG91dHB1dCA9IGdkb3duLmRvd25sb2FkKHVybCwgb3V0cHV0X3BhdGgsIHF1aWV0PUZhbHNlKQogICAgICAgICAgICAKICAgICAgICAgICAgaWYgb3V0cHV0IGlzIE5vbmU6CiAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCLZgdi02YQg2KfZhNiq2K3ZhdmK2YQg2KjYp9iz2KrYrtiv2KfZhSBnZG93biIpCiAgICAgICAgICAgIAogICAgICAgICAgICBmaW5hbF9zaXplID0gb3MucGF0aC5nZXRzaXplKG91dHB1dF9wYXRoKQogICAgICAgICAgICBsb2dnZXIuaW5mbyhmIuKchSDYqtmFINin2YTYqtit2YXZitmEINio2YbYrNin2K0hIikKICAgICAgICAgICAgbG9nZ2VyLmluZm8oZiLwn5OKINin2YTYrdis2YUg2KfZhNmG2YfYp9im2Yo6IHtmaW5hbF9zaXplIC8gMTAyNCAvIDEwMjQ6LjJmfSDZhdmK2KzYp9io2KfZitiqIikKICAgICAgICAgICAgCiAgICAgICAgICAgIHJldHVybiBvdXRwdXRfcGF0aAogICAgICAgICAgICAKICAgICAgICBleGNlcHQgSW1wb3J0RXJyb3I6CiAgICAgICAgICAgIGxvZ2dlci5pbmZvKCLimqDvuI8gZ2Rvd24g2LrZitixINmF2KrZiNmB2LHYjCDYp9iz2KrYrtiv2KfZhSDYp9mE2LfYsdmK2YLYqSDYp9mE2YrYr9mI2YrYqS4uLiIpCiAgICAgICAgICAgICMg2KfZhNmF2KrYp9io2LnYqSDYqNin2YTYt9ix2YrZgtipINin2YTZitiv2YjZitipINij2K/Zhtin2YcKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIGxvZ2dlci53YXJuaW5nKGYi4pqg77iPINmB2LTZhCBnZG93bjoge2V92Iwg2KfZhNmF2K3Yp9mI2YTYqSDYqNi32LHZitmC2Kkg2KPYrtix2YkuLi4iKQogICAgICAgIAogICAgICAgICMg2KfZhNi32LHZitmC2Kkg2KfZhNmK2K/ZiNmK2Kkg2KfZhNmF2K3Ys9mR2YbYqQogICAgICAgIHNlc3Npb24gPSByZXF1ZXN0cy5TZXNzaW9uKCkKICAgICAgICAKICAgICAgICAjINiq2KzYsdio2Kkg2LnYr9ipINi32LHZgiDZhdiu2KrZhNmB2KkKICAgICAgICBhdHRlbXB0cyA9IFsKICAgICAgICAgICAgIyDYp9mE2LfYsdmK2YLYqSAxOiDYsdin2KjYtyDZhdio2KfYtNixINmF2LkgY29uZmlybT10CiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICd1cmwnOiBmImh0dHBzOi8vZHJpdmUuZ29vZ2xlLmNvbS91Yz9pZD17ZmlsZV9pZH0mZXhwb3J0PWRvd25sb2FkJmNvbmZpcm09dCIsCiAgICAgICAgICAgICAgICAnbmFtZSc6ICdEaXJlY3Qgd2l0aCBjb25maXJtPXQnCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgICMg2KfZhNi32LHZitmC2KkgMjog2KfYs9iq2K7Yr9in2YUgY29va2llcwogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAndXJsJzogZiJodHRwczovL2RyaXZlLmdvb2dsZS5jb20vdWM/aWQ9e2ZpbGVfaWR9JmV4cG9ydD1kb3dubG9hZCIsCiAgICAgICAgICAgICAgICAnbmFtZSc6ICdXaXRoIGNvb2tpZXMnLAogICAgICAgICAgICAgICAgJ3VzZV9jb29raWVzJzogVHJ1ZQogICAgICAgICAgICB9LAogICAgICAgICAgICAjINin2YTYt9ix2YrZgtipIDM6IEFQSSBlbmRwb2ludAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAndXJsJzogZiJodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9kcml2ZS92My9maWxlcy97ZmlsZV9pZH0/YWx0PW1lZGlhIiwKICAgICAgICAgICAgICAgICduYW1lJzogJ0dvb2dsZSBBUEknCiAgICAgICAgICAgIH0sCiAgICAgICAgXQogICAgICAgIAogICAgICAgIGZvciBhdHRlbXB0X251bSwgYXR0ZW1wdCBpbiBlbnVtZXJhdGUoYXR0ZW1wdHMsIDEpOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBsb2dnZXIuaW5mbyhmIvCflIQg2KfZhNmF2K3Yp9mI2YTYqSB7YXR0ZW1wdF9udW19OiB7YXR0ZW1wdFsnbmFtZSddfS4uLiIpCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGlmIGF0dGVtcHQuZ2V0KCd1c2VfY29va2llcycpOgogICAgICAgICAgICAgICAgICAgICMg2LfZhNioINij2YjZhNmKINmE2YTYrdi12YjZhCDYudmE2YkgY29va2llcwogICAgICAgICAgICAgICAgICAgIGluaXRfcmVzcG9uc2UgPSBzZXNzaW9uLmdldCgKICAgICAgICAgICAgICAgICAgICAgICAgZiJodHRwczovL2RyaXZlLmdvb2dsZS5jb20vdWM/aWQ9e2ZpbGVfaWR9IiwKICAgICAgICAgICAgICAgICAgICAgICAgc3RyZWFtPVRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVvdXQ9NjAKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gc2Vzc2lvbi5nZXQoCiAgICAgICAgICAgICAgICAgICAgYXR0ZW1wdFsndXJsJ10sCiAgICAgICAgICAgICAgICAgICAgc3RyZWFtPVRydWUsCiAgICAgICAgICAgICAgICAgICAgdGltZW91dD0xMjAsCiAgICAgICAgICAgICAgICAgICAgYWxsb3dfcmVkaXJlY3RzPVRydWUKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgIyDZgdit2LUg2YbZiNi5INin2YTZhdit2KrZiNmJCiAgICAgICAgICAgICAgICBjb250ZW50X3R5cGUgPSByZXNwb25zZS5oZWFkZXJzLmdldCgnQ29udGVudC1UeXBlJywgJycpCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICMg2KXYsNinINmD2KfZhiBIVE1M2Iwg2YbYrdin2YjZhCDYp9iz2KrYrtix2KfYrCDYp9mE2LHYp9io2LcKICAgICAgICAgICAgICAgIGlmICd0ZXh0L2h0bWwnIGluIGNvbnRlbnRfdHlwZToKICAgICAgICAgICAgICAgICAgICBsb2dnZXIuaW5mbyhmIuKaoO+4jyDYtdmB2K3YqSBIVE1MIC0g2YXYrdin2YjZhNipINin2LPYqtiu2LHYp9isINin2YTYsdin2KjYty4uLiIpCiAgICAgICAgICAgICAgICAgICAgY29udGVudCA9IHJlc3BvbnNlLnRleHQKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAjINin2YTYqNit2Ksg2LnZhiDYsdin2KjYtyDYp9mE2KrYrdmF2YrZhCDZgdmKIEhUTUwKICAgICAgICAgICAgICAgICAgICBpbXBvcnQgcmUKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAjINmG2YXYtyAxOiDYp9io2K3YqyDYudmGIGRvd25sb2FkIFVSTAogICAgICAgICAgICAgICAgICAgIHBhdHRlcm5zID0gWwogICAgICAgICAgICAgICAgICAgICAgICByJ2hyZWY9IihodHRwczovL2RyaXZlXC51c2VyY29udGVudFwuZ29vZ2xlXC5jb20vZG93bmxvYWRbXiJdKykiJywKICAgICAgICAgICAgICAgICAgICAgICAgcidocmVmPSIoL3VjXD9leHBvcnQ9ZG93bmxvYWQmYW1wO2NvbmZpcm09W14iXSsmYW1wO2lkPScgKyBmaWxlX2lkICsgcicpIicsCiAgICAgICAgICAgICAgICAgICAgICAgIHInYWN0aW9uPSIoL3VjXD9bXiJdKmV4cG9ydD1kb3dubG9hZFteIl0qKSInLAogICAgICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBkb3dubG9hZF91cmwgPSBOb25lCiAgICAgICAgICAgICAgICAgICAgZm9yIHBhdHRlcm4gaW4gcGF0dGVybnM6CiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoID0gcmUuc2VhcmNoKHBhdHRlcm4sIGNvbnRlbnQpCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIG1hdGNoOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG93bmxvYWRfdXJsID0gbWF0Y2guZ3JvdXAoMSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGRvd25sb2FkX3VybC5zdGFydHN3aXRoKCcvJyk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG93bmxvYWRfdXJsID0gJ2h0dHBzOi8vZHJpdmUuZ29vZ2xlLmNvbScgKyBkb3dubG9hZF91cmwucmVwbGFjZSgnJmFtcDsnLCAnJicpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIuaW5mbyhmIuKchSDYqtmFINin2YTYudir2YjYsSDYudmE2Ykg2LHYp9io2Lcg2KfZhNiq2K3ZhdmK2YQiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBpZiBkb3dubG9hZF91cmw6CiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gc2Vzc2lvbi5nZXQoZG93bmxvYWRfdXJsLCBzdHJlYW09VHJ1ZSwgdGltZW91dD0xMjApCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRfdHlwZSA9IHJlc3BvbnNlLmhlYWRlcnMuZ2V0KCdDb250ZW50LVR5cGUnLCAnJykKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIud2FybmluZyhmIuKaoO+4jyDZhNmFINmK2KrZhSDYp9mE2LnYq9mI2LEg2LnZhNmJINix2KfYqNi3INin2YTYqtit2YXZitmEINmB2YogSFRNTCIpCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICMg2KXYsNinINmF2Kcg2LLYp9mEIEhUTUzYjCDYrNix2Kgg2KfZhNmF2K3Yp9mI2YTYqSDYp9mE2KrYp9mE2YrYqQogICAgICAgICAgICAgICAgaWYgJ3RleHQvaHRtbCcgaW4gY29udGVudF90eXBlOgogICAgICAgICAgICAgICAgICAgIGxvZ2dlci53YXJuaW5nKGYi4pqg77iPINmF2Kcg2LLYp9mEIEhUTUwgLSDYp9mE2YXYrdin2YjZhNipINin2YTYqtin2YTZitipLi4uIikKICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAjINmG2KzYrSEg2KfYqNiv2KMg2KfZhNiq2K3ZhdmK2YQKICAgICAgICAgICAgICAgIHJlc3BvbnNlLnJhaXNlX2Zvcl9zdGF0dXMoKQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB0b3RhbF9zaXplID0gaW50KHJlc3BvbnNlLmhlYWRlcnMuZ2V0KCdjb250ZW50LWxlbmd0aCcsIDApKQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBpZiB0b3RhbF9zaXplID4gMDoKICAgICAgICAgICAgICAgICAgICBsb2dnZXIuaW5mbyhmIvCfk6Yg2K3YrNmFINin2YTZhdmE2YE6IHt0b3RhbF9zaXplIC8gMTAyNCAvIDEwMjQ6LjJmfSDZhdmK2KzYp9io2KfZitiqIikKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLndhcm5pbmcoIuKaoO+4jyDZhNmFINmK2KrZhSDYp9mE2K3YtdmI2YQg2LnZhNmJINit2KzZhSDYp9mE2YXZhNmBIikKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgIyDYp9mE2KrYrdmF2YrZhCDYqNin2YTZgti32LkKICAgICAgICAgICAgICAgIGRvd25sb2FkZWRfc2l6ZSA9IDAKICAgICAgICAgICAgICAgIHN0YXJ0X3RpbWUgPSB0aW1lLnRpbWUoKQogICAgICAgICAgICAgICAgbGFzdF9sb2dfdGltZSA9IHN0YXJ0X3RpbWUKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgbG9nZ2VyLmluZm8oZiLij6wg2KjYr9ihINin2YTYqtit2YXZitmELi4uIikKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgd2l0aCBvcGVuKG91dHB1dF9wYXRoLCAnd2InKSBhcyBmOgogICAgICAgICAgICAgICAgICAgIGZvciBjaHVuayBpbiByZXNwb25zZS5pdGVyX2NvbnRlbnQoY2h1bmtfc2l6ZT1jaHVua19zaXplKToKICAgICAgICAgICAgICAgICAgICAgICAgaWYgY2h1bms6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmLndyaXRlKGNodW5rKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG93bmxvYWRlZF9zaXplICs9IGxlbihjaHVuaykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIyDYudix2LYg2KfZhNiq2YLYr9mFINmD2YQgNSDYq9mI2KfZhtmKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50X3RpbWUgPSB0aW1lLnRpbWUoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgY3VycmVudF90aW1lIC0gbGFzdF9sb2dfdGltZSA+PSA1OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHRvdGFsX3NpemUgPiAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcyA9IChkb3dubG9hZGVkX3NpemUgLyB0b3RhbF9zaXplKSAqIDEwMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIuaW5mbyhmIvCfk6Ug2KfZhNiq2YLYr9mFOiB7cHJvZ3Jlc3M6LjFmfSUgKHtkb3dubG9hZGVkX3NpemUgLyAxMDI0IC8gMTAyNDouMWZ9IE1CKSIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmluZm8oZiLwn5OlINiq2YUg2KrYrdmF2YrZhDoge2Rvd25sb2FkZWRfc2l6ZSAvIDEwMjQgLyAxMDI0Oi4xZn0gTUIiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RfbG9nX3RpbWUgPSBjdXJyZW50X3RpbWUKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgZWxhcHNlZF90aW1lID0gdGltZS50aW1lKCkgLSBzdGFydF90aW1lCiAgICAgICAgICAgICAgICBmaW5hbF9zaXplID0gb3MucGF0aC5nZXRzaXplKG91dHB1dF9wYXRoKQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBsb2dnZXIuaW5mbyhmIuKchSDYqtmFINin2YTYqtit2YXZitmEINio2YbYrNin2K0hIikKICAgICAgICAgICAgICAgIGxvZ2dlci5pbmZvKGYi8J+TiiDYp9mE2K3YrNmFINin2YTZhtmH2KfYptmKOiB7ZmluYWxfc2l6ZSAvIDEwMjQgLyAxMDI0Oi4yZn0g2YXZitis2KfYqNin2YrYqiIpCiAgICAgICAgICAgICAgICBsb2dnZXIuaW5mbyhmIuKPse+4jyDYp9mE2YjZgtiqINin2YTZhdiz2KrYutix2YI6IHtlbGFwc2VkX3RpbWU6LjJmfSDYq9in2YbZitipIikKICAgICAgICAgICAgICAgIGlmIGVsYXBzZWRfdGltZSA+IDA6CiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmluZm8oZiLwn5qAINiz2LHYudipINin2YTYqtit2YXZitmEOiB7ZmluYWxfc2l6ZSAvIDEwMjQgLyAxMDI0IC8gZWxhcHNlZF90aW1lOi4yZn0gTUIvcyIpCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICMg2KfZhNiq2K3ZgtmCINmF2YYg2KPZhiDYp9mE2YXZhNmBINmE2YrYsyBIVE1MCiAgICAgICAgICAgICAgICBpZiBmaW5hbF9zaXplIDwgMTAwMDA6CiAgICAgICAgICAgICAgICAgICAgd2l0aCBvcGVuKG91dHB1dF9wYXRoLCAncmInKSBhcyBmOgogICAgICAgICAgICAgICAgICAgICAgICBmaXJzdF9ieXRlcyA9IGYucmVhZCg1MDApCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGInPGh0bWwnIGluIGZpcnN0X2J5dGVzLmxvd2VyKCkgb3IgYic8IWRvY3R5cGUnIGluIGZpcnN0X2J5dGVzLmxvd2VyKCk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIud2FybmluZyhmIuKaoO+4jyDYp9mE2YXZhNmBINin2YTZhdit2YXZhCBIVE1MIC0g2KfZhNmF2K3Yp9mI2YTYqSDYp9mE2KrYp9mE2YrYqS4uLiIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAjINin2YTYqtit2YLZgiDZhdmGINit2K8g2KPYr9mG2YkKICAgICAgICAgICAgICAgIGlmIGZpbmFsX3NpemUgPCA1MDAwMDoKICAgICAgICAgICAgICAgICAgICBsb2dnZXIud2FybmluZyhmIuKaoO+4jyDYp9mE2YXZhNmBINi12LrZitixINis2K/Yp9mLIC0g2KfZhNmF2K3Yp9mI2YTYqSDYp9mE2KrYp9mE2YrYqS4uLiIpCiAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgIyDZhtis2K0hCiAgICAgICAgICAgICAgICByZXR1cm4gb3V0cHV0X3BhdGgKICAgICAgICAgICAgICAgIAogICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgICAgICBsb2dnZXIud2FybmluZyhmIuKaoO+4jyDZgdi02YTYqiDYp9mE2YXYrdin2YjZhNipIHthdHRlbXB0X251bX06IHtlfSIpCiAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgIAogICAgICAgICMg2KXYsNinINmB2LTZhNiqINmD2YQg2KfZhNmF2K3Yp9mI2YTYp9iqCiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigKICAgICAgICAgICAgIuKdjCDZgdi02YQg2KrYrdmF2YrZhCDYp9mE2YHZitiv2YrZiCDZhdmGIEdvb2dsZSBEcml2ZSDYqNi52K8g2LnYr9ipINmF2K3Yp9mI2YTYp9iqIVxuXG4iCiAgICAgICAgICAgICLwn5KhINin2YTYrdmE2YjZhDpcbiIKICAgICAgICAgICAgIjHvuI/ig6Mg2KrYo9mD2K8g2KPZhiDYp9mE2YXZhNmBINi52KfZhSAo2YXYtNin2LHZgyDZhdi5INin2YTYrNmF2YrYuSlcbiIKICAgICAgICAgICAgIiAgIOKAoiDYp9mB2KrYrSBHb29nbGUgRHJpdmVcbiIKICAgICAgICAgICAgIiAgIOKAoiDYp9mG2YLYsSDYqNiy2LEg2KfZhNmF2KfZiNizINin2YTYo9mK2YXZhiDYudmE2Ykg2KfZhNmB2YrYr9mK2YhcbiIKICAgICAgICAgICAgIiAgIOKAoiDYp9iu2KrYsSAn2YXYtNin2LHZg9ipJ1xuIgogICAgICAgICAgICAiICAg4oCiINi62YrZkdixINil2YTZiSAn2KPZiiDYtNiu2LUg2YTYr9mK2Ycg2KfZhNix2KfYqNi3J1xuXG4iCiAgICAgICAgICAgICIy77iP4oOjINis2LHYqCDYqtit2YXZitmEINin2YTZhdmE2YEg2YrYr9mI2YrYp9mLINmE2YTYqtij2YPYryDZhdmGINij2YbZhyDZiti52YXZhFxuXG4iCiAgICAgICAgICAgICIz77iP4oOjINin2LPYqtiu2K/ZhSDYsdin2KjYtyDYqtit2YXZitmEINmF2KjYp9i02LEg2YXZhiDZhdmI2YLYuSDYotiu2LFcblxuIgogICAgICAgICAgICAiNO+4j+KDoyDYq9io2KogZ2Rvd24g2YTZhNit2LXZiNmEINi52YTZiSDYo9mB2LbZhCDYr9i52YU6XG4iCiAgICAgICAgICAgICIgICBwaXAgaW5zdGFsbCBnZG93biIKICAgICAgICApCgogICAgCiAgICBkZWYgZG93bmxvYWRfdmlkZW8oc2VsZiwgdXJsLCBvdXRwdXRfcGF0aCwgY2h1bmtfc2l6ZT04MTkyKToKICAgICAgICAiIiIKICAgICAgICDYqtit2YXZitmEINin2YTZgdmK2K/ZitmIINmF2YYg2KPZiiDYsdin2KjYtyDZhdi5INiv2LnZhSDZg9in2YXZhCDZhNmE2YXZhNmB2KfYqiDYp9mE2YPYqNmK2LHYqQogICAgICAgIAogICAgICAgIEFyZ3M6CiAgICAgICAgICAgIHVybDog2LHYp9io2Lcg2KfZhNmB2YrYr9mK2YggKNmF2KjYp9i02LEg2KPZiCBHb29nbGUgRHJpdmUpCiAgICAgICAgICAgIG91dHB1dF9wYXRoOiDZhdiz2KfYsSDYrdmB2Lgg2KfZhNmF2YTZgQogICAgICAgICAgICBjaHVua19zaXplOiDYrdis2YUg2KfZhNmC2LfYudipINmE2YTYqtit2YXZitmEICg4S0Ig2KfZgdiq2LHYp9i22YrYp9mLKQogICAgICAgICIiIgogICAgICAgIGxvZ2dlci5pbmZvKGYi8J+UvSDYqNiv2KEg2KfZhNiq2K3ZhdmK2YQg2YXZhjoge3VybFs6NjBdfS4uLiIpCiAgICAgICAgCiAgICAgICAgIyDZhdi52KfZhNis2Kkg2LHZiNin2KjYtyBHb29nbGUgRHJpdmUKICAgICAgICBpZiAnZHJpdmUuZ29vZ2xlLmNvbScgaW4gdXJsOgogICAgICAgICAgICBmaWxlX2lkID0gc2VsZi5leHRyYWN0X2dvb2dsZV9kcml2ZV9pZCh1cmwpCiAgICAgICAgICAgIGlmIGZpbGVfaWQ6CiAgICAgICAgICAgICAgICBsb2dnZXIuaW5mbyhmIvCfk4Eg2YXYudix2YEgR29vZ2xlIERyaXZlOiB7ZmlsZV9pZH0iKQogICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYuX2Rvd25sb2FkX2Zyb21fZ29vZ2xlX2RyaXZlKGZpbGVfaWQsIG91dHB1dF9wYXRoLCBjaHVua19zaXplKQogICAgICAgIAogICAgICAgIHRyeToKICAgICAgICAgICAgIyDYqNiv2KEg2KfZhNiq2K3ZhdmK2YQg2YXYuSBzdHJlYW09VHJ1ZSDZhNiv2LnZhSDYp9mE2YXZhNmB2KfYqiDYp9mE2YPYqNmK2LHYqQogICAgICAgICAgICByZXNwb25zZSA9IHJlcXVlc3RzLmdldCh1cmwsIHN0cmVhbT1UcnVlLCB0aW1lb3V0PTYwLCBhbGxvd19yZWRpcmVjdHM9VHJ1ZSkKICAgICAgICAgICAgcmVzcG9uc2UucmFpc2VfZm9yX3N0YXR1cygpCiAgICAgICAgICAgIAogICAgICAgICAgICAjINin2YTYrdi12YjZhCDYudmE2Ykg2K3YrNmFINin2YTZhdmE2YEg2KXZhiDZiNis2K8KICAgICAgICAgICAgdG90YWxfc2l6ZSA9IGludChyZXNwb25zZS5oZWFkZXJzLmdldCgnY29udGVudC1sZW5ndGgnLCAwKSkKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmIHRvdGFsX3NpemUgPiAwOgogICAgICAgICAgICAgICAgbG9nZ2VyLmluZm8oZiLwn5OmINit2KzZhSDYp9mE2YXZhNmBOiB7dG90YWxfc2l6ZSAvIDEwMjQgLyAxMDI0Oi4yZn0g2YXZitis2KfYqNin2YrYqiIpCiAgICAgICAgICAgIAogICAgICAgICAgICAjINin2YTYqtit2YXZitmEINio2KfZhNmC2LfYuQogICAgICAgICAgICBkb3dubG9hZGVkX3NpemUgPSAwCiAgICAgICAgICAgIHN0YXJ0X3RpbWUgPSB0aW1lLnRpbWUoKQogICAgICAgICAgICAKICAgICAgICAgICAgd2l0aCBvcGVuKG91dHB1dF9wYXRoLCAnd2InKSBhcyBmOgogICAgICAgICAgICAgICAgZm9yIGNodW5rIGluIHJlc3BvbnNlLml0ZXJfY29udGVudChjaHVua19zaXplPWNodW5rX3NpemUpOgogICAgICAgICAgICAgICAgICAgIGlmIGNodW5rOgogICAgICAgICAgICAgICAgICAgICAgICBmLndyaXRlKGNodW5rKQogICAgICAgICAgICAgICAgICAgICAgICBkb3dubG9hZGVkX3NpemUgKz0gbGVuKGNodW5rKQogICAgICAgICAgICAKICAgICAgICAgICAgZWxhcHNlZF90aW1lID0gdGltZS50aW1lKCkgLSBzdGFydF90aW1lCiAgICAgICAgICAgIGZpbmFsX3NpemUgPSBvcy5wYXRoLmdldHNpemUob3V0cHV0X3BhdGgpCiAgICAgICAgICAgIAogICAgICAgICAgICBsb2dnZXIuaW5mbyhmIuKchSDYqtmFINin2YTYqtit2YXZitmEINio2YbYrNin2K0hIikKICAgICAgICAgICAgbG9nZ2VyLmluZm8oZiLwn5OKINin2YTYrdis2YUg2KfZhNmG2YfYp9im2Yo6IHtmaW5hbF9zaXplIC8gMTAyNCAvIDEwMjQ6LjJmfSDZhdmK2KzYp9io2KfZitiqIikKICAgICAgICAgICAgbG9nZ2VyLmluZm8oZiLij7HvuI8g2KfZhNmI2YLYqiDYp9mE2YXYs9iq2LrYsdmCOiB7ZWxhcHNlZF90aW1lOi4yZn0g2KvYp9mG2YrYqSIpCiAgICAgICAgICAgIAogICAgICAgICAgICAjINin2YTYqtit2YLZgiDZhdmGINij2YYg2KfZhNmF2YTZgSDZhNmK2LMg2YHYp9ix2LrYp9mLCiAgICAgICAgICAgIGlmIGZpbmFsX3NpemUgPCAxMDAwOiAgIyDYo9mC2YQg2YXZhiAxINmD2YrZhNmI2KjYp9mK2KoKICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoZiLinYwg2KfZhNmF2YTZgSDYp9mE2YXYrdmF2YQg2LXYutmK2LEg2KzYr9in2YsgKHtmaW5hbF9zaXplfSDYqNin2YrYqikhINmC2K8g2YrZg9mI2YYg2YfZhtin2YMg2K7Yt9ijINmB2Yog2KfZhNix2KfYqNi3LiIpCiAgICAgICAgICAgIAogICAgICAgICAgICByZXR1cm4gb3V0cHV0X3BhdGgKICAgICAgICAgICAgCiAgICAgICAgZXhjZXB0IHJlcXVlc3RzLmV4Y2VwdGlvbnMuUmVxdWVzdEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBsb2dnZXIuZXJyb3IoZiLinYwg2K7Yt9ijINmB2Yog2KfZhNiq2K3ZhdmK2YQ6IHtlfSIpCiAgICAgICAgICAgIHJhaXNlCiAgICAKICAgIGRlZiBnZXRfdmlkZW9faW5mbyhzZWxmLCB2aWRlb19wYXRoKToKICAgICAgICAiIiLYp9mE2K3YtdmI2YQg2LnZhNmJINmF2LnZhNmI2YXYp9iqINin2YTZgdmK2K/ZitmIINio2KfYs9iq2K7Yr9in2YUgZmZwcm9iZSIiIgogICAgICAgIHRyeToKICAgICAgICAgICAgY21kID0gWwogICAgICAgICAgICAgICAgJ2ZmcHJvYmUnLAogICAgICAgICAgICAgICAgJy12JywgJ3F1aWV0JywKICAgICAgICAgICAgICAgICctcHJpbnRfZm9ybWF0JywgJ2pzb24nLAogICAgICAgICAgICAgICAgJy1zaG93X2Zvcm1hdCcsCiAgICAgICAgICAgICAgICAnLXNob3dfc3RyZWFtcycsCiAgICAgICAgICAgICAgICB2aWRlb19wYXRoCiAgICAgICAgICAgIF0KICAgICAgICAgICAgCiAgICAgICAgICAgIHJlc3VsdCA9IHN1YnByb2Nlc3MucnVuKGNtZCwgY2FwdHVyZV9vdXRwdXQ9VHJ1ZSwgdGV4dD1UcnVlKQogICAgICAgICAgICBpZiByZXN1bHQucmV0dXJuY29kZSAhPSAwOgogICAgICAgICAgICAgICAgcmV0dXJuIE5vbmUKICAgICAgICAgICAgICAgIAogICAgICAgICAgICBpbXBvcnQganNvbgogICAgICAgICAgICBpbmZvID0ganNvbi5sb2FkcyhyZXN1bHQuc3Rkb3V0KQogICAgICAgICAgICAKICAgICAgICAgICAgIyDYp9iz2KrYrtix2KfYrCDYp9mE2YXYudmE2YjZhdin2Kog2KfZhNmF2YfZhdipCiAgICAgICAgICAgIGZvcm1hdF9pbmZvID0gaW5mby5nZXQoJ2Zvcm1hdCcsIHt9KQogICAgICAgICAgICB2aWRlb19zdHJlYW0gPSBuZXh0KChzIGZvciBzIGluIGluZm8uZ2V0KCdzdHJlYW1zJywgW10pIGlmIHNbJ2NvZGVjX3R5cGUnXSA9PSAndmlkZW8nKSwgTm9uZSkKICAgICAgICAgICAgCiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAnc2l6ZSc6IGludChmb3JtYXRfaW5mby5nZXQoJ3NpemUnLCAwKSksCiAgICAgICAgICAgICAgICAnZHVyYXRpb24nOiBmbG9hdChmb3JtYXRfaW5mby5nZXQoJ2R1cmF0aW9uJywgMCkpLAogICAgICAgICAgICAgICAgJ2JpdHJhdGUnOiBpbnQoZm9ybWF0X2luZm8uZ2V0KCdiaXRfcmF0ZScsIDApKSwKICAgICAgICAgICAgICAgICd3aWR0aCc6IHZpZGVvX3N0cmVhbS5nZXQoJ3dpZHRoJywgMCkgaWYgdmlkZW9fc3RyZWFtIGVsc2UgMCwKICAgICAgICAgICAgICAgICdoZWlnaHQnOiB2aWRlb19zdHJlYW0uZ2V0KCdoZWlnaHQnLCAwKSBpZiB2aWRlb19zdHJlYW0gZWxzZSAwLAogICAgICAgICAgICAgICAgJ2NvZGVjJzogdmlkZW9fc3RyZWFtLmdldCgnY29kZWNfbmFtZScsICd1bmtub3duJykgaWYgdmlkZW9fc3RyZWFtIGVsc2UgJ3Vua25vd24nLAogICAgICAgICAgICB9CiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBsb2dnZXIud2FybmluZyhmIuKaoO+4jyDYqti52LDYsSDYp9mE2K3YtdmI2YQg2LnZhNmJINmF2LnZhNmI2YXYp9iqINin2YTZgdmK2K/ZitmIOiB7ZX0iKQogICAgICAgICAgICByZXR1cm4gTm9uZQogICAgCiAgICBkZWYgY29tcHJlc3NfdmlkZW8oc2VsZiwgaW5wdXRfcGF0aCwgb3V0cHV0X3BhdGgsIHF1YWxpdHk9J21lZGl1bScsIHRhcmdldF9zaXplX21iPU5vbmUpOgogICAgICAgICIiIgogICAgICAgINi22LrYtyDYp9mE2YHZitiv2YrZiCDYqNin2LPYqtiu2K/Yp9mFIEZGbXBlZwogICAgICAgIAogICAgICAgIEFyZ3M6CiAgICAgICAgICAgIGlucHV0X3BhdGg6INmF2LPYp9ixINin2YTZgdmK2K/ZitmIINin2YTZhdiv2K7ZhAogICAgICAgICAgICBvdXRwdXRfcGF0aDog2YXYs9in2LEg2KfZhNmB2YrYr9mK2Ygg2KfZhNmF2K7YsdisCiAgICAgICAgICAgIHF1YWxpdHk6INis2YjYr9ipINin2YTYtti62LcgKCdsb3cnLCAnbWVkaXVtJywgJ2hpZ2gnLCAndWx0cmEnKQogICAgICAgICAgICB0YXJnZXRfc2l6ZV9tYjog2KfZhNit2KzZhSDYp9mE2YXYs9iq2YfYr9mBINio2KfZhNmF2YrYrNin2KjYp9mK2KogKNin2K7YqtmK2KfYsdmKKQogICAgICAgICIiIgogICAgICAgIGxvZ2dlci5pbmZvKGYi8J+OrCDYqNiv2KEg2LbYuti3INin2YTZgdmK2K/ZitmILi4uIikKICAgICAgICBsb2dnZXIuaW5mbyhmIvCfk4Ig2KfZhNmF2K/YrtmEOiB7aW5wdXRfcGF0aH0iKQogICAgICAgIGxvZ2dlci5pbmZvKGYi8J+TgSDYp9mE2YXYrtix2Kw6IHtvdXRwdXRfcGF0aH0iKQogICAgICAgIAogICAgICAgICMg2KfZhNit2LXZiNmEINi52YTZiSDZhdi52YTZiNmF2KfYqiDYp9mE2YHZitiv2YrZiAogICAgICAgIHZpZGVvX2luZm8gPSBzZWxmLmdldF92aWRlb19pbmZvKGlucHV0X3BhdGgpCiAgICAgICAgaWYgdmlkZW9faW5mbzoKICAgICAgICAgICAgbG9nZ2VyLmluZm8oZiLwn5OKINmF2LnZhNmI2YXYp9iqINin2YTZgdmK2K/ZitmIINin2YTYo9i12YTZijoiKQogICAgICAgICAgICBsb2dnZXIuaW5mbyhmIiAgIOKAoiDYp9mE2K3YrNmFOiB7dmlkZW9faW5mb1snc2l6ZSddIC8gMTAyNCAvIDEwMjQ6LjJmfSDZhdmK2KzYp9io2KfZitiqIikKICAgICAgICAgICAgbG9nZ2VyLmluZm8oZiIgICDigKIg2KfZhNmF2K/YqToge3ZpZGVvX2luZm9bJ2R1cmF0aW9uJ106LjJmfSDYq9in2YbZitipIikKICAgICAgICAgICAgbG9nZ2VyLmluZm8oZiIgICDigKIg2KfZhNiv2YLYqToge3ZpZGVvX2luZm9bJ3dpZHRoJ119eHt2aWRlb19pbmZvWydoZWlnaHQnXX0iKQogICAgICAgICAgICBsb2dnZXIuaW5mbyhmIiAgIOKAoiDZhdi52K/ZhCDYp9mE2KjYqjoge3ZpZGVvX2luZm9bJ2JpdHJhdGUnXSAvIDEwMDA6LjBmfSBrYnBzIikKICAgICAgICAKICAgICAgICAjINil2LnYr9in2K/Yp9iqINin2YTYrNmI2K/YqQogICAgICAgIHF1YWxpdHlfc2V0dGluZ3MgPSB7CiAgICAgICAgICAgICd1bHRyYSc6IHsnY3JmJzogMTgsICdwcmVzZXQnOiAnc2xvdycsICdhdWRpb19iaXRyYXRlJzogJzE5MmsnfSwKICAgICAgICAgICAgJ2hpZ2gnOiB7J2NyZic6IDIzLCAncHJlc2V0JzogJ21lZGl1bScsICdhdWRpb19iaXRyYXRlJzogJzEyOGsnfSwKICAgICAgICAgICAgJ21lZGl1bSc6IHsnY3JmJzogMjgsICdwcmVzZXQnOiAnZmFzdCcsICdhdWRpb19iaXRyYXRlJzogJzk2ayd9LAogICAgICAgICAgICAnbG93JzogeydjcmYnOiAzMiwgJ3ByZXNldCc6ICdmYXN0ZXInLCAnYXVkaW9fYml0cmF0ZSc6ICc2NGsnfSwKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgc2V0dGluZ3MgPSBxdWFsaXR5X3NldHRpbmdzLmdldChxdWFsaXR5LCBxdWFsaXR5X3NldHRpbmdzWydtZWRpdW0nXSkKICAgICAgICAKICAgICAgICAjINio2YbYp9ihINij2YXYsSBGRm1wZWcKICAgICAgICBjbWQgPSBbCiAgICAgICAgICAgICdmZm1wZWcnLAogICAgICAgICAgICAnLWknLCBpbnB1dF9wYXRoLAogICAgICAgICAgICAnLWM6dicsICdsaWJ4MjY0JywgICMg2YPZiNiv2YMg2KfZhNmB2YrYr9mK2YgKICAgICAgICAgICAgJy1jcmYnLCBzdHIoc2V0dGluZ3NbJ2NyZiddKSwgICMg2KzZiNiv2Kkg2KfZhNi22LrYtyAo2KPZgtmEID0g2KPZgdi22YQpCiAgICAgICAgICAgICctcHJlc2V0Jywgc2V0dGluZ3NbJ3ByZXNldCddLCAgIyDYs9ix2LnYqSDYp9mE2LbYuti3CiAgICAgICAgICAgICctYzphJywgJ2FhYycsICAjINmD2YjYr9mDINin2YTYtdmI2KoKICAgICAgICAgICAgJy1iOmEnLCBzZXR0aW5nc1snYXVkaW9fYml0cmF0ZSddLCAgIyDZhdi52K/ZhCDYqNiqINin2YTYtdmI2KoKICAgICAgICAgICAgJy1tb3ZmbGFncycsICcrZmFzdHN0YXJ0JywgICMg2YTZhNiq2LTYutmK2YQg2KfZhNiz2LHZiti5CiAgICAgICAgICAgICcteScsICAjINin2LPYqtio2K/Yp9mEINin2YTZhdmE2YEg2KXZhiDZiNis2K8KICAgICAgICAgICAgb3V0cHV0X3BhdGgKICAgICAgICBdCiAgICAgICAgCiAgICAgICAgIyDYpdiw2Kcg2YPYp9mGINmH2YbYp9mDINit2KzZhSDZhdiz2KrZh9iv2YHYjCDZhtit2LPYqCDZhdi52K/ZhCDYp9mE2KjYqiDYp9mE2YXYt9mE2YjYqAogICAgICAgIGlmIHRhcmdldF9zaXplX21iIGFuZCB2aWRlb19pbmZvIGFuZCB2aWRlb19pbmZvWydkdXJhdGlvbiddID4gMDoKICAgICAgICAgICAgdGFyZ2V0X2JpdHJhdGUgPSBpbnQoKHRhcmdldF9zaXplX21iICogOCAqIDEwMjQpIC8gdmlkZW9faW5mb1snZHVyYXRpb24nXSkKICAgICAgICAgICAgYXVkaW9fYml0cmF0ZSA9IGludChzZXR0aW5nc1snYXVkaW9fYml0cmF0ZSddLnJlcGxhY2UoJ2snLCAnJykpCiAgICAgICAgICAgIHZpZGVvX2JpdHJhdGUgPSB0YXJnZXRfYml0cmF0ZSAtIGF1ZGlvX2JpdHJhdGUKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmIHZpZGVvX2JpdHJhdGUgPiAwOgogICAgICAgICAgICAgICAgbG9nZ2VyLmluZm8oZiLwn46vINin2YTYrdis2YUg2KfZhNmF2LPYqtmH2K/ZgToge3RhcmdldF9zaXplX21ifSDZhdmK2KzYp9io2KfZitiqIikKICAgICAgICAgICAgICAgIGxvZ2dlci5pbmZvKGYi8J+TiSDZhdi52K/ZhCDYp9mE2KjYqiDYp9mE2YXYrdiz2YjYqDoge3ZpZGVvX2JpdHJhdGV9IGticHMiKQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAjINin2LPYqtio2K/Yp9mEIENSRiDYqNmF2LnYr9mEINio2Kog2KvYp9io2KoKICAgICAgICAgICAgICAgIGNtZCA9IFsKICAgICAgICAgICAgICAgICAgICAnZmZtcGVnJywKICAgICAgICAgICAgICAgICAgICAnLWknLCBpbnB1dF9wYXRoLAogICAgICAgICAgICAgICAgICAgICctYzp2JywgJ2xpYngyNjQnLAogICAgICAgICAgICAgICAgICAgICctYjp2JywgZid7dmlkZW9fYml0cmF0ZX1rJywKICAgICAgICAgICAgICAgICAgICAnLW1heHJhdGUnLCBmJ3t2aWRlb19iaXRyYXRlfWsnLAogICAgICAgICAgICAgICAgICAgICctYnVmc2l6ZScsIGYne3ZpZGVvX2JpdHJhdGUgKiAyfWsnLAogICAgICAgICAgICAgICAgICAgICctcHJlc2V0Jywgc2V0dGluZ3NbJ3ByZXNldCddLAogICAgICAgICAgICAgICAgICAgICctYzphJywgJ2FhYycsCiAgICAgICAgICAgICAgICAgICAgJy1iOmEnLCBzZXR0aW5nc1snYXVkaW9fYml0cmF0ZSddLAogICAgICAgICAgICAgICAgICAgICctbW92ZmxhZ3MnLCAnK2Zhc3RzdGFydCcsCiAgICAgICAgICAgICAgICAgICAgJy15JywKICAgICAgICAgICAgICAgICAgICBvdXRwdXRfcGF0aAogICAgICAgICAgICAgICAgXQogICAgICAgIAogICAgICAgIHRyeToKICAgICAgICAgICAgIyDYqtmG2YHZitiwINin2YTYtti62LcKICAgICAgICAgICAgbG9nZ2VyLmluZm8oZiLimpnvuI8g2KzYp9ix2Yog2KfZhNi22LrYtyDYqNis2YjYr9ipICd7cXVhbGl0eX0nLi4uIikKICAgICAgICAgICAgc3RhcnRfdGltZSA9IHRpbWUudGltZSgpCiAgICAgICAgICAgIAogICAgICAgICAgICByZXN1bHQgPSBzdWJwcm9jZXNzLnJ1bigKICAgICAgICAgICAgICAgIGNtZCwKICAgICAgICAgICAgICAgIGNhcHR1cmVfb3V0cHV0PVRydWUsCiAgICAgICAgICAgICAgICB0ZXh0PVRydWUKICAgICAgICAgICAgKQogICAgICAgICAgICAKICAgICAgICAgICAgaWYgcmVzdWx0LnJldHVybmNvZGUgIT0gMDoKICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcihmIuKdjCDYrti32KMg2YHZiiBGRm1wZWc6IikKICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcihyZXN1bHQuc3RkZXJyKQogICAgICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCLZgdi02YQg2LbYuti3INin2YTZgdmK2K/ZitmIIikKICAgICAgICAgICAgCiAgICAgICAgICAgIGVsYXBzZWRfdGltZSA9IHRpbWUudGltZSgpIC0gc3RhcnRfdGltZQogICAgICAgICAgICAKICAgICAgICAgICAgIyDZhdi52YTZiNmF2KfYqiDYp9mE2YXZhNmBINin2YTZhdi22LrZiNi3CiAgICAgICAgICAgIGlmIG9zLnBhdGguZXhpc3RzKG91dHB1dF9wYXRoKToKICAgICAgICAgICAgICAgIG91dHB1dF9zaXplID0gb3MucGF0aC5nZXRzaXplKG91dHB1dF9wYXRoKQogICAgICAgICAgICAgICAgY29tcHJlc3Npb25fcmF0aW8gPSAoMSAtIG91dHB1dF9zaXplIC8gdmlkZW9faW5mb1snc2l6ZSddKSAqIDEwMCBpZiB2aWRlb19pbmZvIGVsc2UgMAogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBsb2dnZXIuaW5mbyhmIuKchSDYqtmFINin2YTYtti62Lcg2KjZhtis2KfYrSEiKQogICAgICAgICAgICAgICAgbG9nZ2VyLmluZm8oZiLwn5OKINin2YTYrdis2YUg2KjYudivINin2YTYtti62Lc6IHtvdXRwdXRfc2l6ZSAvIDEwMjQgLyAxMDI0Oi4yZn0g2YXZitis2KfYqNin2YrYqiIpCiAgICAgICAgICAgICAgICBpZiB2aWRlb19pbmZvOgogICAgICAgICAgICAgICAgICAgIGxvZ2dlci5pbmZvKGYi8J+TiSDZhtiz2KjYqSDYp9mE2LbYuti3OiB7Y29tcHJlc3Npb25fcmF0aW86LjFmfSUiKQogICAgICAgICAgICAgICAgbG9nZ2VyLmluZm8oZiLij7HvuI8g2KfZhNmI2YLYqiDYp9mE2YXYs9iq2LrYsdmCOiB7ZWxhcHNlZF90aW1lOi4yZn0g2KvYp9mG2YrYqSIpCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIHJldHVybiBvdXRwdXRfcGF0aAogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCLZgdi02YQg2KXZhti02KfYoSDYp9mE2YXZhNmBINin2YTZhdi22LrZiNi3IikKICAgICAgICAgICAgICAgIAogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgbG9nZ2VyLmVycm9yKGYi4p2MINiu2LfYoyDYo9ir2YbYp9ihINin2YTYtti62Lc6IHtlfSIpCiAgICAgICAgICAgIHJhaXNlCiAgICAKICAgIGRlZiBwcm9jZXNzX3ZpZGVvX2Zyb21fdXJsKHNlbGYsIHVybCwgcXVhbGl0eT0nbWVkaXVtJywgdGFyZ2V0X3NpemVfbWI9Tm9uZSk6CiAgICAgICAgIiIiCiAgICAgICAg2KrYrdmF2YrZhCDZiNi22LrYtyDZgdmK2K/ZitmIINmF2YYg2LHYp9io2LcKICAgICAgICAKICAgICAgICBSZXR1cm5zOgogICAgICAgICAgICDZhdiz2KfYsSDYp9mE2YHZitiv2YrZiCDYp9mE2YXYtti62YjYtwogICAgICAgICIiIgogICAgICAgICMg2KXZhti02KfYoSDYo9iz2YXYp9ihINmF2YTZgdin2Kog2YXYpNmC2KrYqQogICAgICAgIHRpbWVzdGFtcCA9IGludCh0aW1lLnRpbWUoKSkKICAgICAgICBpbnB1dF9maWxlID0gc2VsZi50ZW1wX2RpciAvIGYiaW5wdXRfe3RpbWVzdGFtcH0ubXA0IgogICAgICAgIG91dHB1dF9maWxlID0gc2VsZi50ZW1wX2RpciAvIGYiY29tcHJlc3NlZF97dGltZXN0YW1wfS5tcDQiCiAgICAgICAgCiAgICAgICAgdHJ5OgogICAgICAgICAgICAjIDEuINiq2K3ZhdmK2YQg2KfZhNmB2YrYr9mK2YgKICAgICAgICAgICAgc2VsZi5kb3dubG9hZF92aWRlbyh1cmwsIHN0cihpbnB1dF9maWxlKSkKICAgICAgICAgICAgCiAgICAgICAgICAgICMgMi4g2LbYuti3INin2YTZgdmK2K/ZitmICiAgICAgICAgICAgIHNlbGYuY29tcHJlc3NfdmlkZW8oCiAgICAgICAgICAgICAgICBzdHIoaW5wdXRfZmlsZSksCiAgICAgICAgICAgICAgICBzdHIob3V0cHV0X2ZpbGUpLAogICAgICAgICAgICAgICAgcXVhbGl0eT1xdWFsaXR5LAogICAgICAgICAgICAgICAgdGFyZ2V0X3NpemVfbWI9dGFyZ2V0X3NpemVfbWIKICAgICAgICAgICAgKQogICAgICAgICAgICAKICAgICAgICAgICAgcmV0dXJuIHN0cihvdXRwdXRfZmlsZSkKICAgICAgICAgICAgCiAgICAgICAgZmluYWxseToKICAgICAgICAgICAgIyDYrdiw2YEg2KfZhNmF2YTZgSDYp9mE2YXYr9iu2YQg2YTZhNiq2YjZgdmK2LEg2YHZiiDYp9mE2YXYs9in2K3YqQogICAgICAgICAgICBpZiBpbnB1dF9maWxlLmV4aXN0cygpOgogICAgICAgICAgICAgICAgaW5wdXRfZmlsZS51bmxpbmsoKQogICAgICAgICAgICAgICAgbG9nZ2VyLmluZm8oZiLwn5eR77iPINiq2YUg2K3YsNmBINin2YTZhdmE2YEg2KfZhNmF2KTZgtiqOiB7aW5wdXRfZmlsZX0iKQogICAgCiAgICBkZWYgY2xlYW51cChzZWxmKToKICAgICAgICAiIiLYrdiw2YEg2KzZhdmK2Lkg2KfZhNmF2YTZgdin2Kog2KfZhNmF2KTZgtiq2KkiIiIKICAgICAgICBpbXBvcnQgc2h1dGlsCiAgICAgICAgaWYgc2VsZi50ZW1wX2Rpci5leGlzdHMoKToKICAgICAgICAgICAgc2h1dGlsLnJtdHJlZShzZWxmLnRlbXBfZGlyKQogICAgICAgICAgICBsb2dnZXIuaW5mbygi8J+Xke+4jyDYqtmFINit2LDZgSDYrNmF2YrYuSDYp9mE2YXZhNmB2KfYqiDYp9mE2YXYpNmC2KrYqSIpCgoKIyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiMg8J+kliDZgdim2KkgVGVsZWdyYW0gQm90CiMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoKY2xhc3MgVmlkZW9Db21wcmVzc29yQm90OgogICAgIiIi2KjZiNiqIFRlbGVncmFtINmE2LbYuti3INin2YTZgdmK2K/ZitmI2YfYp9iqIiIiCiAgICAKICAgIGRlZiBfX2luaXRfXyhzZWxmLCB0b2tlbik6CiAgICAgICAgc2VsZi50b2tlbiA9IHRva2VuCiAgICAgICAgc2VsZi5jb21wcmVzc29yID0gVmlkZW9Db21wcmVzc29yKCkKICAgICAgICBzZWxmLmFwcCA9IEFwcGxpY2F0aW9uLmJ1aWxkZXIoKS50b2tlbih0b2tlbikuYnVpbGQoKQogICAgICAgIAogICAgICAgICMg2KXYttin2YHYqSDZhdi52KfZhNisINmE2YTYo9iu2LfYp9ihCiAgICAgICAgc2VsZi5hcHAuYWRkX2Vycm9yX2hhbmRsZXIoc2VsZi5lcnJvcl9oYW5kbGVyKQogICAgICAgIAogICAgICAgICMg2KXYttin2YHYqSDYp9mE2YXYudin2YTYrNin2KoKICAgICAgICBzZWxmLmFwcC5hZGRfaGFuZGxlcihDb21tYW5kSGFuZGxlcigic3RhcnQiLCBzZWxmLnN0YXJ0KSkKICAgICAgICBzZWxmLmFwcC5hZGRfaGFuZGxlcihDb21tYW5kSGFuZGxlcigiaGVscCIsIHNlbGYuaGVscCkpCiAgICAgICAgc2VsZi5hcHAuYWRkX2hhbmRsZXIoTWVzc2FnZUhhbmRsZXIoZmlsdGVycy5URVhUICYgfmZpbHRlcnMuQ09NTUFORCwgc2VsZi5oYW5kbGVfdXJsKSkKICAgICAgICBzZWxmLmFwcC5hZGRfaGFuZGxlcihDYWxsYmFja1F1ZXJ5SGFuZGxlcihzZWxmLmhhbmRsZV9jYWxsYmFjaykpCiAgICAKICAgIGFzeW5jIGRlZiBlcnJvcl9oYW5kbGVyKHNlbGYsIHVwZGF0ZTogb2JqZWN0LCBjb250ZXh0OiBDb250ZXh0VHlwZXMuREVGQVVMVF9UWVBFKToKICAgICAgICAiIiLZhdi52KfZhNisINi52KfZhSDZhNmE2KPYrti32KfYoSIiIgogICAgICAgIGVycm9yID0gY29udGV4dC5lcnJvcgogICAgICAgIAogICAgICAgICMg2KrYrNin2YfZhCDYo9iu2LfYp9ihIENvbmZsaWN0ICjZhtiz2K7YqSDYo9iu2LHZiSDZhdmGINin2YTYqNmI2Kog2KrYudmF2YQpCiAgICAgICAgaWYgIkNvbmZsaWN0IiBpbiBzdHIoZXJyb3IpIG9yICI0MDkiIGluIHN0cihlcnJvcik6CiAgICAgICAgICAgIGxvZ2dlci53YXJuaW5nKGYi4pqg77iPINiq2LnYp9ix2LY6INmG2LPYrtipINij2K7YsdmJINmF2YYg2KfZhNio2YjYqiDYqti52YXZhC4g2LPZitiq2YUg2KfZhNmF2K3Yp9mI2YTYqSDZhdix2Kkg2KPYrtix2YkuLi4iKQogICAgICAgICAgICByZXR1cm4KICAgICAgICAKICAgICAgICAjINiq2LPYrNmK2YQg2KfZhNij2K7Yt9in2KEg2KfZhNij2K7YsdmJCiAgICAgICAgbG9nZ2VyLmVycm9yKGYi2K3Yr9irINiu2LfYozoge2Vycm9yfSIsIGV4Y19pbmZvPWNvbnRleHQuZXJyb3IpCiAgICAKICAgIGFzeW5jIGRlZiBzdGFydChzZWxmLCB1cGRhdGU6IFVwZGF0ZSwgY29udGV4dDogQ29udGV4dFR5cGVzLkRFRkFVTFRfVFlQRSk6CiAgICAgICAgIiIi2LHYs9in2YTYqSDYp9mE2KrYsdit2YrYqCIiIgogICAgICAgIHdlbGNvbWVfdGV4dCA9ICIiIgrwn46sICoq2YXYsdit2KjYp9mLINio2YMg2YHZiiDYttin2LrYtyDYp9mE2YHZitiv2YrZiNmH2KfYqiEqKgoK8J+MnyAqKtin2YTZhdmF2YrYstin2Ko6KioK4pyFINiv2LnZhSBHb29nbGUgRHJpdmUg2YjYp9mE2LHZiNin2KjYtyDYp9mE2YXYqNin2LTYsdipCuKchSDYtti62Lcg2YHZitiv2YrZiNmH2KfYqiDYqNij2Yog2K3YrNmFICg1MCBNQiAtIDYwMCBNQispCuKchSA0INmF2LPYqtmI2YrYp9iqINis2YjYr9ipINmF2K7YqtmE2YHYqQrinIUg2LbYuti3INiz2LHZiti5INmI2YHYudin2YQKCvCfk50gKirZg9mK2YHZitipINin2YTYp9iz2KrYrtiv2KfZhToqKgox77iP4oOjINij2LHYs9mEINix2KfYqNi3INin2YTZgdmK2K/ZitmICjLvuI/ig6Mg2KfYrtiq2LEg2KzZiNiv2Kkg2KfZhNi22LrYtwoz77iP4oOjINin2YbYqti42LEg2K3YqtmJINmK2KrZhSDYp9mE2LbYuti3CjTvuI/ig6Mg2KfYs9iq2YTZhSDYp9mE2YHZitiv2YrZiCDYp9mE2YXYtti62YjYtyEKCvCflJcgKirYo9mF2KvZhNipINi52YTZiSDYp9mE2LHZiNin2KjYtyDYp9mE2YXYr9i52YjZhdipOioqCuKAoiBHb29nbGUgRHJpdmU6IAogIGBodHRwczovL2RyaXZlLmdvb2dsZS5jb20vdWM/aWQ9eHh4eHgmZXhwb3J0PWRvd25sb2FkYArigKIg2LHZiNin2KjYtyDZhdio2KfYtNix2Kk6IAogIGBodHRwczovL2V4YW1wbGUuY29tL3ZpZGVvLm1wNGAKCtij2LHYs9mEINix2KfYqNi3INin2YTZgdmK2K/ZitmIINin2YTYotmGISDwn5GHCiIiIgogICAgICAgIGF3YWl0IHVwZGF0ZS5tZXNzYWdlLnJlcGx5X3RleHQoCiAgICAgICAgICAgIHdlbGNvbWVfdGV4dCwKICAgICAgICAgICAgcGFyc2VfbW9kZT0nTWFya2Rvd24nCiAgICAgICAgKQogICAgCiAgICBhc3luYyBkZWYgaGVscChzZWxmLCB1cGRhdGU6IFVwZGF0ZSwgY29udGV4dDogQ29udGV4dFR5cGVzLkRFRkFVTFRfVFlQRSk6CiAgICAgICAgIiIi2LHYs9in2YTYqSDYp9mE2YXYs9in2LnYr9ipIiIiCiAgICAgICAgaGVscF90ZXh0ID0gIiIiCuKdkyAqKtmD2YrZgdmK2Kkg2KfZhNin2LPYqtiu2K/Yp9mFOioqCgoqKjHvuI/ig6Mg2KPYsdiz2YQg2LHYp9io2Lcg2KfZhNmB2YrYr9mK2YgqKgoK8J+UlyAqKtmE2LHZiNin2KjYtyBHb29nbGUgRHJpdmU6KioKYGBgCmh0dHBzOi8vZHJpdmUuZ29vZ2xlLmNvbS9maWxlL2QvRklMRV9JRC92aWV3CmBgYArimqDvuI8g2KrYo9mD2K8g2YXZhjoK4oCiINin2YTZhdmE2YEg2YXYtNin2LHZgyDZhdi5ICLYo9mKINi02K7YtSDZhNiv2YrZhyDYp9mE2LHYp9io2LciCuKAoiDYp9mE2YXZhNmBICoq2YTZitizKiog2YXYrdmF2YrYp9mLINio2YPZhNmF2Kkg2YXYsdmI2LEK4oCiINit2KzZhSDYp9mE2YXZhNmBINmF2YbYp9iz2KggKNij2YLZhCDZhdmGIDIg2KzZitis2Kcg2YXYq9in2YTZiikKCvCflJcgKirZhNmE2LHZiNin2KjYtyDYp9mE2YXYqNin2LTYsdipOioqCmBgYApodHRwczovL2V4YW1wbGUuY29tL3ZpZGVvLm1wNApgYGAKCioqMu+4j+KDoyDYp9iu2KrYsSDYp9mE2KzZiNiv2Kk6KioK4oCiIPCflLQg2YXZhtiu2YHYttipOiDYtti62Lcg2YLZiNmKINis2K/Yp9mL2Iwg2K3YrNmFINi12LrZitixCuKAoiDwn5+hINmF2KrZiNiz2LfYqTog2KrZiNin2LLZhiDZhdir2KfZhNmKIOKtkCAo2YXZiNi12Ykg2KjZhykK4oCiIPCfn6Ig2LnYp9mE2YrYqTog2KzZiNiv2Kkg2YXZhdiq2KfYstip2Iwg2K3YrNmFINij2YPYqNixCuKAoiDwn5S1INmB2KfYptmC2Kk6INij2YHYttmEINis2YjYr9ipINmF2YXZg9mG2KkKCioqM++4j+KDoyDYp9mG2KrYuNixKioK2LPZitiq2YUg2KrYrdmF2YrZhCDZiNi22LrYtyDYp9mE2YHZitiv2YrZiCDYqtmE2YLYp9im2YrYp9mLCuKPse+4jyDZgtivINmK2LPYqti62LHZgiAyLTEwINiv2YLYp9im2YIg2K3Ys9ioINin2YTYrdis2YUKCioqNO+4j+KDoyDYp9iz2KrZhNmFINin2YTZgdmK2K/ZitmIKioK2LPZitiq2YUg2LHZgdi5INin2YTZgdmK2K/ZitmIINin2YTZhdi22LrZiNi3INmF2KjYp9i02LHYqQoK8J+TjCAqKtmF2YTYp9it2LjYp9iqINmF2YfZhdipOioqCuKAoiDZitiv2LnZhSDYrNmF2YrYuSDYo9it2KzYp9mFINin2YTZgdmK2K/ZitmI2YfYp9iqCuKAoiDYp9mE2LbYuti3INmK2K3Yp9mB2Lgg2LnZhNmJINin2YTYrNmI2K/YqSDZgtiv2LEg2KfZhNil2YXZg9in2YYK4oCiINin2YTZhdmE2YHYp9iqINin2YTZhdik2YLYqtipINmK2KrZhSDYrdiw2YHZh9inINiq2YTZgtin2KbZitin2YsK4oCiINit2K8g2LHZgdi5IFRlbGVncmFtOiA1MCDZhdmK2KzYp9io2KfZitiqCgrimqDvuI8gKirYrdmEINmF2LTYp9mD2YQgR29vZ2xlIERyaXZlOioqCtil2LDYpyDYuNmH2LHYqiDYsdiz2KfZhNipICLYp9mE2YXZhNmBINi62YrYsSDYudin2YUiOgoxLiDYp9mB2KrYrSBHb29nbGUgRHJpdmUKMi4g2KfZhtmC2LEg2KjYp9mE2YXYp9mI2LMg2KfZhNij2YrZhdmGINi52YTZiSDYp9mE2YHZitiv2YrZiAozLiDYp9iu2KrYsSAi2YXYtNin2LHZg9ipIgo0LiDYutmK2ZHYsSDYpdmE2YkgItij2Yog2LTYrti1INmE2K/ZitmHINin2YTYsdin2KjYtyIKNS4g2KfYrdmB2Lgg2YjYo9ix2LPZhCDYp9mE2LHYp9io2Lcg2YXYsdipINij2K7YsdmJCgrwn5KhICoq2YbYtdmK2K3YqToqKgrZhNmE2YHZitiv2YrZiNmH2KfYqiDYp9mE2YPYqNmK2LHYqSDYrNiv2KfZiyAoKzMwMCBNQinYjCDYp9iu2KrYsSDYrNmI2K/YqSAi2YXZhtiu2YHYttipIiDYo9mIICLZhdiq2YjYs9i32KkiCiIiIgogICAgICAgIGF3YWl0IHVwZGF0ZS5tZXNzYWdlLnJlcGx5X3RleHQoCiAgICAgICAgICAgIGhlbHBfdGV4dCwKICAgICAgICAgICAgcGFyc2VfbW9kZT0nTWFya2Rvd24nCiAgICAgICAgKQogICAgCiAgICBhc3luYyBkZWYgaGFuZGxlX3VybChzZWxmLCB1cGRhdGU6IFVwZGF0ZSwgY29udGV4dDogQ29udGV4dFR5cGVzLkRFRkFVTFRfVFlQRSk6CiAgICAgICAgIiIi2YXYudin2YTYrNipINin2YTYsdin2KjYtyDYp9mE2YXYsdiz2YQiIiIKICAgICAgICB1cmwgPSB1cGRhdGUubWVzc2FnZS50ZXh0LnN0cmlwKCkKICAgICAgICAKICAgICAgICAjINin2YTYqtit2YLZgiDZhdmGINi12K3YqSDYp9mE2LHYp9io2LcKICAgICAgICBpZiBub3QgdXJsLnN0YXJ0c3dpdGgoKCdodHRwOi8vJywgJ2h0dHBzOi8vJykpOgogICAgICAgICAgICBhd2FpdCB1cGRhdGUubWVzc2FnZS5yZXBseV90ZXh0KAogICAgICAgICAgICAgICAgIuKdjCDYp9mE2LHYrNin2KEg2KXYsdiz2KfZhCDYsdin2KjYtyDYtdit2YrYrSDZitio2K/YoyDYqNmAIGh0dHA6Ly8g2KPZiCBodHRwczovL1xuXG4iCiAgICAgICAgICAgICAgICAi2YXYq9in2YQ6XG4iCiAgICAgICAgICAgICAgICAiYGh0dHBzOi8vZHJpdmUuZ29vZ2xlLmNvbS91Yz9pZD14eHh4eCZleHBvcnQ9ZG93bmxvYWRgIiwKICAgICAgICAgICAgICAgIHBhcnNlX21vZGU9J01hcmtkb3duJwogICAgICAgICAgICApCiAgICAgICAgICAgIHJldHVybgogICAgICAgIAogICAgICAgICMg2K3Zgdi4INin2YTYsdin2KjYtyDZgdmKINin2YTYs9mK2KfZggogICAgICAgIGNvbnRleHQudXNlcl9kYXRhWyd2aWRlb191cmwnXSA9IHVybAogICAgICAgIAogICAgICAgICMg2LnYsdi2INiu2YrYp9ix2KfYqiDYp9mE2KzZiNiv2KkKICAgICAgICBrZXlib2FyZCA9IFsKICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgSW5saW5lS2V5Ym9hcmRCdXR0b24oIvCflLQg2YXZhtiu2YHYttipIiwgY2FsbGJhY2tfZGF0YT0icXVhbGl0eV9sb3ciKSwKICAgICAgICAgICAgICAgIElubGluZUtleWJvYXJkQnV0dG9uKCLwn5+hINmF2KrZiNiz2LfYqSDirZAiLCBjYWxsYmFja19kYXRhPSJxdWFsaXR5X21lZGl1bSIpLAogICAgICAgICAgICBdLAogICAgICAgICAgICBbCiAgICAgICAgICAgICAgICBJbmxpbmVLZXlib2FyZEJ1dHRvbigi8J+foiDYudin2YTZitipIiwgY2FsbGJhY2tfZGF0YT0icXVhbGl0eV9oaWdoIiksCiAgICAgICAgICAgICAgICBJbmxpbmVLZXlib2FyZEJ1dHRvbigi8J+UtSDZgdin2KbZgtipIiwgY2FsbGJhY2tfZGF0YT0icXVhbGl0eV91bHRyYSIpLAogICAgICAgICAgICBdLAogICAgICAgIF0KICAgICAgICByZXBseV9tYXJrdXAgPSBJbmxpbmVLZXlib2FyZE1hcmt1cChrZXlib2FyZCkKICAgICAgICAKICAgICAgICBhd2FpdCB1cGRhdGUubWVzc2FnZS5yZXBseV90ZXh0KAogICAgICAgICAgICAi4pyFINiq2YUg2KfYs9iq2YTYp9mFINin2YTYsdin2KjYtyFcblxuIgogICAgICAgICAgICAi8J+TiiDYp9iu2KrYsSDYrNmI2K/YqSDYp9mE2LbYuti3OlxuXG4iCiAgICAgICAgICAgICLwn5S0INmF2YbYrtmB2LbYqTog2KPYtdi62LEg2K3YrNmFXG4iCiAgICAgICAgICAgICLwn5+hINmF2KrZiNiz2LfYqTog2KrZiNin2LLZhiDZhdir2KfZhNmKICjZhdmI2LXZiSDYqNmHKVxuIgogICAgICAgICAgICAi8J+foiDYudin2YTZitipOiDYrNmI2K/YqSDZhdmF2KrYp9iy2KlcbiIKICAgICAgICAgICAgIvCflLUg2YHYp9im2YLYqTog2KPZgdi22YQg2KzZiNiv2KkiLAogICAgICAgICAgICByZXBseV9tYXJrdXA9cmVwbHlfbWFya3VwCiAgICAgICAgKQogICAgCiAgICBhc3luYyBkZWYgaGFuZGxlX2NhbGxiYWNrKHNlbGYsIHVwZGF0ZTogVXBkYXRlLCBjb250ZXh0OiBDb250ZXh0VHlwZXMuREVGQVVMVF9UWVBFKToKICAgICAgICAiIiLZhdi52KfZhNis2Kkg2KfYrtiq2YrYp9ixINin2YTYrNmI2K/YqSIiIgogICAgICAgIHF1ZXJ5ID0gdXBkYXRlLmNhbGxiYWNrX3F1ZXJ5CiAgICAgICAgYXdhaXQgcXVlcnkuYW5zd2VyKCkKICAgICAgICAKICAgICAgICAjINin2LPYqtiu2LHYp9isINin2YTYrNmI2K/YqSDZhdmGIGNhbGxiYWNrX2RhdGEKICAgICAgICBxdWFsaXR5X21hcCA9IHsKICAgICAgICAgICAgJ3F1YWxpdHlfbG93JzogKCdsb3cnLCAn8J+UtCDZhdmG2K7Zgdi22KknKSwKICAgICAgICAgICAgJ3F1YWxpdHlfbWVkaXVtJzogKCdtZWRpdW0nLCAn8J+foSDZhdiq2YjYs9i32KknKSwKICAgICAgICAgICAgJ3F1YWxpdHlfaGlnaCc6ICgnaGlnaCcsICfwn5+iINi52KfZhNmK2KknKSwKICAgICAgICAgICAgJ3F1YWxpdHlfdWx0cmEnOiAoJ3VsdHJhJywgJ/CflLUg2YHYp9im2YLYqScpLAogICAgICAgIH0KICAgICAgICAKICAgICAgICBxdWFsaXR5LCBxdWFsaXR5X25hbWUgPSBxdWFsaXR5X21hcC5nZXQocXVlcnkuZGF0YSwgKCdtZWRpdW0nLCAn8J+foSDZhdiq2YjYs9i32KknKSkKICAgICAgICB1cmwgPSBjb250ZXh0LnVzZXJfZGF0YS5nZXQoJ3ZpZGVvX3VybCcpCiAgICAgICAgCiAgICAgICAgaWYgbm90IHVybDoKICAgICAgICAgICAgYXdhaXQgcXVlcnkuZWRpdF9tZXNzYWdlX3RleHQoIuKdjCDYrti32KM6INmE2YUg2YrYqtmFINin2YTYudir2YjYsSDYudmE2Ykg2KfZhNix2KfYqNi3LiDYo9ix2LPZhCDYsdin2KjYtyDYrNiv2YrYry4iKQogICAgICAgICAgICByZXR1cm4KICAgICAgICAKICAgICAgICAjINiq2K3Yr9mK2Ksg2KfZhNix2LPYp9mE2KkgLSDYqNiv2KEg2KfZhNmF2LnYp9mE2KzYqQogICAgICAgIGF3YWl0IHF1ZXJ5LmVkaXRfbWVzc2FnZV90ZXh0KAogICAgICAgICAgICBmIuKPsyAqKtis2KfYsdmKINin2YTZhdi52KfZhNis2KkuLi4qKlxuXG4iCiAgICAgICAgICAgIGYi8J+UlyDYp9mE2LHYp9io2Lc6IGB7dXJsWzo1MF19Li4uYFxuIgogICAgICAgICAgICBmIvCfk4og2KfZhNis2YjYr9ipOiB7cXVhbGl0eV9uYW1lfVxuXG4iCiAgICAgICAgICAgIGYi4o+x77iPINin2YTYsdis2KfYoSDYp9mE2KfZhtiq2LjYp9ixLi4uXG4iCiAgICAgICAgICAgIGYi2YLYryDYqtiz2KrYutix2YIg2KfZhNi52YXZhNmK2Kkg2LnYr9ipINiv2YLYp9im2YIg2K3Ys9ioINit2KzZhSDYp9mE2YHZitiv2YrZiC4iLAogICAgICAgICAgICBwYXJzZV9tb2RlPSdNYXJrZG93bicKICAgICAgICApCiAgICAgICAgCiAgICAgICAgdHJ5OgogICAgICAgICAgICAjINiq2K3Yr9mK2Ksg2KfZhNix2LPYp9mE2KkgLSDYqNiv2KEg2KfZhNmF2LnYp9mE2KzYqQogICAgICAgICAgICBwcm9ncmVzc19tZXNzYWdlID0gYXdhaXQgcXVlcnkubWVzc2FnZS5yZXBseV90ZXh0KAogICAgICAgICAgICAgICAgIvCfk6UgKirZhdix2K3ZhNipIDEvMjoqKiDYrNin2LHZiiDYp9mE2KrYrdmF2YrZhCDZiNin2YTYtti62LcuLi5cbiIKICAgICAgICAgICAgICAgICLij7Mg2KfZhNix2KzYp9ihINin2YTYp9mG2KrYuNin2LEuLi4iLAogICAgICAgICAgICAgICAgcGFyc2VfbW9kZT0nTWFya2Rvd24nCiAgICAgICAgICAgICkKICAgICAgICAgICAgCiAgICAgICAgICAgICMg2KjYr9ihINi52YXZhNmK2Kkg2KfZhNi22LrYtwogICAgICAgICAgICBjb21wcmVzc2VkX2ZpbGUgPSBhd2FpdCBhc3luY2lvLnRvX3RocmVhZCgKICAgICAgICAgICAgICAgIHNlbGYuY29tcHJlc3Nvci5wcm9jZXNzX3ZpZGVvX2Zyb21fdXJsLAogICAgICAgICAgICAgICAgdXJsLAogICAgICAgICAgICAgICAgcXVhbGl0eT1xdWFsaXR5CiAgICAgICAgICAgICkKICAgICAgICAgICAgCiAgICAgICAgICAgICMg2K3YsNmBINix2LPYp9mE2Kkg2KfZhNiq2YLYr9mFCiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIGF3YWl0IHByb2dyZXNzX21lc3NhZ2UuZGVsZXRlKCkKICAgICAgICAgICAgZXhjZXB0OgogICAgICAgICAgICAgICAgcGFzcwogICAgICAgICAgICAKICAgICAgICAgICAgIyDYqtit2K/ZitirINin2YTYsdiz2KfZhNipIC0g2LHZgdi5INin2YTZgdmK2K/ZitmICiAgICAgICAgICAgIGF3YWl0IHF1ZXJ5LmVkaXRfbWVzc2FnZV90ZXh0KAogICAgICAgICAgICAgICAgZiLinIUgKirYqtmFINin2YTYtti62Lcg2KjZhtis2KfYrSEqKlxuXG4iCiAgICAgICAgICAgICAgICBmIvCfk6Qg2KzYp9ix2Yog2LHZgdi5INin2YTZgdmK2K/ZitmILi4uIiwKICAgICAgICAgICAgICAgIHBhcnNlX21vZGU9J01hcmtkb3duJwogICAgICAgICAgICApCiAgICAgICAgICAgIAogICAgICAgICAgICBmaWxlX3NpemUgPSBvcy5wYXRoLmdldHNpemUoY29tcHJlc3NlZF9maWxlKQogICAgICAgICAgICBmaWxlX3NpemVfbWIgPSBmaWxlX3NpemUgLyAxMDI0IC8gMTAyNAogICAgICAgICAgICAKICAgICAgICAgICAgIyDYp9mE2KrYrdmC2YIg2YXZhiDYrdis2YUg2KfZhNmF2YTZgSAoVGVsZWdyYW0gbGltaXQ6IDUwTUIgZm9yIGJvdHMpCiAgICAgICAgICAgIGlmIGZpbGVfc2l6ZSA+IE1BWF9URUxFR1JBTV9TSVpFX01CICogMTAyNCAqIDEwMjQ6CiAgICAgICAgICAgICAgICBhd2FpdCBxdWVyeS5lZGl0X21lc3NhZ2VfdGV4dCgKICAgICAgICAgICAgICAgICAgICBmIuKaoO+4jyAqKtin2YTZgdmK2K/ZitmIINin2YTZhdi22LrZiNi3INmD2KjZitixINis2K/Yp9mLISoqXG5cbiIKICAgICAgICAgICAgICAgICAgICBmIvCfk6Yg2KfZhNit2KzZhToge2ZpbGVfc2l6ZV9tYjouMmZ9INmF2YrYrNin2KjYp9mK2KpcbiIKICAgICAgICAgICAgICAgICAgICBmIvCfk48g2KfZhNit2K8g2KfZhNij2YLYtdmJOiB7TUFYX1RFTEVHUkFNX1NJWkVfTUJ9INmF2YrYrNin2KjYp9mK2KpcblxuIgogICAgICAgICAgICAgICAgICAgIGYi8J+SoSAqKtin2YTYrdmEOioqXG4iCiAgICAgICAgICAgICAgICAgICAgZiLigKIg2KfYrtiq2LEg2KzZiNiv2Kkg2KPZgtmEICjwn5S0INmF2YbYrtmB2LbYqSlcbiIKICAgICAgICAgICAgICAgICAgICBmIuKAoiDYo9mIINmC2LPZhSDYp9mE2YHZitiv2YrZiCDYpdmE2Ykg2KPYrNiy2KfYoSDYo9i12LrYsSIsCiAgICAgICAgICAgICAgICAgICAgcGFyc2VfbW9kZT0nTWFya2Rvd24nCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICBvcy5yZW1vdmUoY29tcHJlc3NlZF9maWxlKQogICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgIAogICAgICAgICAgICAjINix2YHYuSDYp9mE2YHZitiv2YrZiAogICAgICAgICAgICB3aXRoIG9wZW4oY29tcHJlc3NlZF9maWxlLCAncmInKSBhcyB2aWRlbzoKICAgICAgICAgICAgICAgIGF3YWl0IHF1ZXJ5Lm1lc3NhZ2UucmVwbHlfdmlkZW8oCiAgICAgICAgICAgICAgICAgICAgdmlkZW89dmlkZW8sCiAgICAgICAgICAgICAgICAgICAgY2FwdGlvbj1mIuKchSAqKtiq2YUg2KfZhNi22LrYtyDYqNmG2KzYp9itISoqXG5cbiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYi8J+TiiDYp9mE2KzZiNiv2Kk6IHtxdWFsaXR5X25hbWV9XG4iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmIvCfk6Yg2KfZhNit2KzZhToge2ZpbGVfc2l6ZV9tYjouMmZ9INmF2YrYrNin2KjYp9mK2KpcblxuIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZiLwn46JINin2LPYqtmF2KrYuSDYqNin2YTZgdmK2K/ZitmIISIsCiAgICAgICAgICAgICAgICAgICAgc3VwcG9ydHNfc3RyZWFtaW5nPVRydWUsCiAgICAgICAgICAgICAgICAgICAgcGFyc2VfbW9kZT0nTWFya2Rvd24nCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgIAogICAgICAgICAgICBhd2FpdCBxdWVyeS5lZGl0X21lc3NhZ2VfdGV4dCgKICAgICAgICAgICAgICAgIGYi4pyFICoq2KrZhSDYpdix2LPYp9mEINin2YTZgdmK2K/ZitmIINin2YTZhdi22LrZiNi3ISoqXG5cbiIKICAgICAgICAgICAgICAgIGYi8J+TiiDYp9mE2KzZiNiv2Kk6IHtxdWFsaXR5X25hbWV9XG4iCiAgICAgICAgICAgICAgICBmIvCfk6Yg2KfZhNit2KzZhToge2ZpbGVfc2l6ZV9tYjouMmZ9INmF2YrYrNin2KjYp9mK2KpcblxuIgogICAgICAgICAgICAgICAgZiLwn5SEINij2LHYs9mEINix2KfYqNi3INii2K7YsSDZhNmE2YXYstmK2K8hIiwKICAgICAgICAgICAgICAgIHBhcnNlX21vZGU9J01hcmtkb3duJwogICAgICAgICAgICApCiAgICAgICAgICAgIAogICAgICAgICAgICAjINit2LDZgSDYp9mE2YXZhNmBINin2YTZhdik2YLYqgogICAgICAgICAgICBvcy5yZW1vdmUoY29tcHJlc3NlZF9maWxlKQogICAgICAgICAgICBsb2dnZXIuaW5mbyhmIvCfl5HvuI8g2KrZhSDYrdiw2YEg2KfZhNmF2YTZgSDYp9mE2YXYtti62YjYtzoge2NvbXByZXNzZWRfZmlsZX0iKQogICAgICAgICAgICAKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIGxvZ2dlci5lcnJvcihmItiu2LfYoyDZgdmKINi22LrYtyDYp9mE2YHZitiv2YrZiDoge2V9IiwgZXhjX2luZm89VHJ1ZSkKICAgICAgICAgICAgCiAgICAgICAgICAgIGVycm9yX21lc3NhZ2UgPSBzdHIoZSkKICAgICAgICAgICAgCiAgICAgICAgICAgICMg2KrYrdiz2YrZhiDYsdiz2KfYptmEINin2YTYo9iu2LfYp9ihINin2YTYtNin2KbYudipCiAgICAgICAgICAgIGlmICJIVE1MIiBpbiBlcnJvcl9tZXNzYWdlIG9yICLYtdmB2K3YqSIgaW4gZXJyb3JfbWVzc2FnZToKICAgICAgICAgICAgICAgIGVycm9yX3RleHQgPSAoCiAgICAgICAgICAgICAgICAgICAgIuKdjCAqKtmF2LTZg9mE2Kkg2YHZiiDYsdin2KjYtyBHb29nbGUgRHJpdmUqKlxuXG4iCiAgICAgICAgICAgICAgICAgICAgIvCflJIg2KfZhNmF2YTZgSDZgtivINmK2YPZiNmGINi62YrYsSDYudin2YUg2KPZiCDZhdit2YXZii5cblxuIgogICAgICAgICAgICAgICAgICAgICLwn5KhICoq2KfZhNit2YTZiNmEOioqXG4iCiAgICAgICAgICAgICAgICAgICAgIjHvuI/ig6Mg2KrYo9mD2K8g2YXZhiDZhdi02KfYsdmD2Kkg2KfZhNmF2YTZgSDZhdi5IFwi2KPZiiDYtNiu2LUg2YTYr9mK2Ycg2KfZhNix2KfYqNi3XCJcbiIKICAgICAgICAgICAgICAgICAgICAiMu+4j+KDoyDZgdmKIEdvb2dsZSBEcml2ZTpcbiIKICAgICAgICAgICAgICAgICAgICAiICAg4oCiINin2YbZgtixINio2LLYsSDYp9mE2YXYp9mI2LMg2KfZhNij2YrZhdmGINi52YTZiSDYp9mE2YHZitiv2YrZiFxuIgogICAgICAgICAgICAgICAgICAgICIgICDigKIg2KfYrtiq2LEgXCLZhdi02KfYsdmD2KlcIiDihpIgXCLZhtiz2K4g2KfZhNix2KfYqNi3XCJcbiIKICAgICAgICAgICAgICAgICAgICAiICAg4oCiINiq2KPZg9ivINmF2YYgXCLYp9mE2YjYtdmI2YQg2KfZhNi52KfZhVwiXG4iCiAgICAgICAgICAgICAgICAgICAgIjPvuI/ig6Mg2KPZiCDYp9iz2KrYrtiv2YUg2YXZiNmC2Lkg2KrYrdmF2YrZhCDZhdio2KfYtNixINii2K7YsSIKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgZWxpZiAiSW52YWxpZCBkYXRhIGZvdW5kIiBpbiBlcnJvcl9tZXNzYWdlOgogICAgICAgICAgICAgICAgZXJyb3JfdGV4dCA9ICgKICAgICAgICAgICAgICAgICAgICAi4p2MICoq2KfZhNmB2YrYr9mK2Ygg2KrYp9mE2YEg2KPZiCDYutmK2LEg2LXYp9mE2K0qKlxuXG4iCiAgICAgICAgICAgICAgICAgICAgIvCfk50g2KfZhNiu2LfYozog2KfZhNmF2YTZgSDYp9mE2YXYrdmF2YQg2YTZitizINmB2YrYr9mK2Ygg2LXYrdmK2K1cblxuIgogICAgICAgICAgICAgICAgICAgICLwn5KhICoq2KfZhNit2YTZiNmEOioqXG4iCiAgICAgICAgICAgICAgICAgICAgIuKAoiDYqtij2YPYryDZhdmGINi12K3YqSDYsdin2KjYtyDYp9mE2YHZitiv2YrZiFxuIgogICAgICAgICAgICAgICAgICAgICLigKIg2KzYsdioINix2KfYqNi3INiq2K3ZhdmK2YQg2YXYqNin2LTYsSDYotiu2LFcbiIKICAgICAgICAgICAgICAgICAgICAi4oCiINiq2K3ZgtmCINmF2YYg2KPZhiDYp9mE2LHYp9io2Lcg2YTZhNmB2YrYr9mK2Ygg2YbZgdiz2Ycg2YjZhNmK2LMg2LXZgdit2Kkg2YjZitioIgogICAgICAgICAgICAgICAgKQogICAgICAgICAgICBlbGlmICJ0aW1lb3V0IiBpbiBlcnJvcl9tZXNzYWdlLmxvd2VyKCk6CiAgICAgICAgICAgICAgICBlcnJvcl90ZXh0ID0gKAogICAgICAgICAgICAgICAgICAgICLij7HvuI8gKirYp9mG2KrZh9iqINmF2YfZhNipINin2YTYqtit2YXZitmEKipcblxuIgogICAgICAgICAgICAgICAgICAgICLwn5KhICoq2KfZhNit2YTZiNmEOioqXG4iCiAgICAgICAgICAgICAgICAgICAgIuKAoiDYqtit2YLZgiDZhdmGINin2KrYtdin2YQg2KfZhNil2YbYqtix2YbYqlxuIgogICAgICAgICAgICAgICAgICAgICLigKIg2KzYsdioINmF2LHYqSDYo9iu2LHZiVxuIgogICAgICAgICAgICAgICAgICAgICLigKIg2YLYryDZitmD2YjZhiDYp9mE2YXZhNmBINmD2KjZitixINis2K/Yp9mLIgogICAgICAgICAgICAgICAgKQogICAgICAgICAgICBlbGlmICJDb25uZWN0aW9uIiBpbiBlcnJvcl9tZXNzYWdlIG9yICJOZXR3b3JrIiBpbiBlcnJvcl9tZXNzYWdlOgogICAgICAgICAgICAgICAgZXJyb3JfdGV4dCA9ICgKICAgICAgICAgICAgICAgICAgICAi8J+MkCAqKtmF2LTZg9mE2Kkg2YHZiiDYp9mE2KfYqti12KfZhCoqXG5cbiIKICAgICAgICAgICAgICAgICAgICAi8J+SoSAqKtin2YTYrdmE2YjZhDoqKlxuIgogICAgICAgICAgICAgICAgICAgICLigKIg2KrYrdmC2YIg2YXZhiDYp9iq2LXYp9mEINin2YTYpdmG2KrYsdmG2KpcbiIKICAgICAgICAgICAgICAgICAgICAi4oCiINiq2KPZg9ivINmF2YYg2LXYrdipINin2YTYsdin2KjYt1xuIgogICAgICAgICAgICAgICAgICAgICLigKIg2KzYsdioINmF2LHYqSDYo9iu2LHZiSDYqNi52K8g2YLZhNmK2YQiCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgIGVsaWYgIti12LrZitixINis2K/Yp9mLIiBpbiBlcnJvcl9tZXNzYWdlIG9yICJzbWFsbCIgaW4gZXJyb3JfbWVzc2FnZS5sb3dlcigpOgogICAgICAgICAgICAgICAgZXJyb3JfdGV4dCA9ICgKICAgICAgICAgICAgICAgICAgICAi8J+TpiAqKtit2KzZhSDYp9mE2YXZhNmBINi12LrZitixINis2K/Yp9mLKipcblxuIgogICAgICAgICAgICAgICAgICAgIGYi8J+TnSDYp9mE2KrZgdin2LXZitmEOiB7ZXJyb3JfbWVzc2FnZX1cblxuIgogICAgICAgICAgICAgICAgICAgICLwn5KhICoq2KfZhNit2YTZiNmEOioqXG4iCiAgICAgICAgICAgICAgICAgICAgIuKAoiDYp9mE2LHYp9io2Lcg2YLYryDZhNinINmK2YPZiNmGINmE2YTYqtit2YXZitmEINin2YTZhdio2KfYtNixXG4iCiAgICAgICAgICAgICAgICAgICAgIuKAoiDYqtij2YPYryDZhdmGINij2YYg2KfZhNix2KfYqNi3INi12K3ZititXG4iCiAgICAgICAgICAgICAgICAgICAgIuKAoiDYrNix2Kgg2LHYp9io2LcgR29vZ2xlIERyaXZlINio2LXZiti62Kk6XG4iCiAgICAgICAgICAgICAgICAgICAgIiAgYGh0dHBzOi8vZHJpdmUuZ29vZ2xlLmNvbS91Yz9pZD1GSUxFX0lEJmV4cG9ydD1kb3dubG9hZGAiCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBlcnJvcl90ZXh0ID0gKAogICAgICAgICAgICAgICAgICAgIGYi4p2MICoq2K3Yr9irINiu2LfYoyDYo9ir2YbYp9ihINin2YTZhdi52KfZhNis2KkqKlxuXG4iCiAgICAgICAgICAgICAgICAgICAgZiLwn5OdINin2YTYrti32KM6IGB7ZXJyb3JfbWVzc2FnZVs6MjAwXX1gXG5cbiIKICAgICAgICAgICAgICAgICAgICBmIvCfkqEgKirYp9mE2K3ZhNmI2YQg2KfZhNmF2YLYqtix2K3YqToqKlxuIgogICAgICAgICAgICAgICAgICAgIGYi4oCiINiq2KPZg9ivINmF2YYg2LXYrdipINin2YTYsdin2KjYt1xuIgogICAgICAgICAgICAgICAgICAgIGYi4oCiINiq2K3ZgtmCINmF2YYg2KPZhiDYp9mE2LHYp9io2Lcg2YTZhNiq2K3ZhdmK2YQg2KfZhNmF2KjYp9i02LFcbiIKICAgICAgICAgICAgICAgICAgICBmIuKAoiDYrNix2Kgg2LHYp9io2Lcg2KLYrtixXG4iCiAgICAgICAgICAgICAgICAgICAgZiLigKIg2YTZhNmF2LPYp9i52K/YqTogL2hlbHAiCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgIAogICAgICAgICAgICBhd2FpdCBxdWVyeS5lZGl0X21lc3NhZ2VfdGV4dCgKICAgICAgICAgICAgICAgIGVycm9yX3RleHQsCiAgICAgICAgICAgICAgICBwYXJzZV9tb2RlPSdNYXJrZG93bicKICAgICAgICAgICAgKQogICAgCiAgICBkZWYgcnVuKHNlbGYpOgogICAgICAgICIiItiq2LTYutmK2YQg2KfZhNio2YjYqiIiIgogICAgICAgIGxvZ2dlci5pbmZvKCI9IiAqIDcwKQogICAgICAgIGxvZ2dlci5pbmZvKCLwn5qAINio2K/YoSDYqti02LrZitmEINio2YjYqiDYtti62Lcg2KfZhNmB2YrYr9mK2YjZh9in2KoiKQogICAgICAgIGxvZ2dlci5pbmZvKCI9IiAqIDcwKQogICAgICAgIGxvZ2dlci5pbmZvKGYi8J+TgSDYp9mE2YXYrNmE2K8g2KfZhNmF2KTZgtiqOiB7VEVNUF9ESVJ9IikKICAgICAgICBsb2dnZXIuaW5mbyhmIvCfk6Yg2K3YryDYsdmB2LkgVGVsZWdyYW06IHtNQVhfVEVMRUdSQU1fU0laRV9NQn0g2YXZitis2KfYqNin2YrYqiIpCiAgICAgICAgbG9nZ2VyLmluZm8oIuKchSDYp9mE2KjZiNiqINis2KfZh9iyINmE2YTYudmF2YQhIikKICAgICAgICBsb2dnZXIuaW5mbygiPSIgKiA3MCkKICAgICAgICAKICAgICAgICAjINiq2YUg2KrYudiv2YrZhNmHINmE2YTYudmF2YQg2YHZiiB0aHJlYWQKCiAgICAgICAgCiAgICAgICAgaW1wb3J0IGFzeW5jaW8KCiAgICAgICAgCiAgICAgICAgbG9vcCA9IGFzeW5jaW8ubmV3X2V2ZW50X2xvb3AoKQoKICAgICAgICAKICAgICAgICBhc3luY2lvLnNldF9ldmVudF9sb29wKGxvb3ApCgogICAgICAgIAogICAgICAgIGFzeW5jIGRlZiBydW4oKToKCiAgICAgICAgCiAgICAgICAgICAgIGF3YWl0IHNlbGYuYXBwLmluaXRpYWxpemUoKQoKICAgICAgICAKICAgICAgICAgICAgYXdhaXQgc2VsZi5hcHAuc3RhcnQoKQoKICAgICAgICAKICAgICAgICAgICAgYXdhaXQgc2VsZi5hcHAudXBkYXRlci5zdGFydF9wb2xsaW5nKCkKCiAgICAgICAgCiAgICAgICAgICAgIHRyeToKCiAgICAgICAgCiAgICAgICAgICAgICAgICB3aGlsZSBUcnVlOgoKICAgICAgICAKICAgICAgICAgICAgICAgICAgICBhd2FpdCBhc3luY2lvLnNsZWVwKDEpCgogICAgICAgIAogICAgICAgICAgICBleGNlcHQ6CgogICAgICAgIAogICAgICAgICAgICAgICAgcGFzcwoKICAgICAgICAKICAgICAgICAgICAgZmluYWxseToKCiAgICAgICAgCiAgICAgICAgICAgICAgICBhd2FpdCBzZWxmLmFwcC51cGRhdGVyLnN0b3AoKQoKICAgICAgICAKICAgICAgICAgICAgICAgIGF3YWl0IHNlbGYuYXBwLnN0b3AoKQoKICAgICAgICAKICAgICAgICAgICAgICAgIGF3YWl0IHNlbGYuYXBwLnNodXRkb3duKCkKCiAgICAgICAgCiAgICAgICAgbG9vcC5ydW5fdW50aWxfY29tcGxldGUocnVuKCkpCgoKIyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiMg8J+OryDZhtmC2LfYqSDYp9mE2KjYr9in2YrYqQojID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCmlmIF9fbmFtZV9fID09ICJfX21haW5fXyI6CiAgICB0cnk6CiAgICAgICAgIyDYp9mE2KrYrdmC2YIg2YXZhiDZiNis2YjYryBGRm1wZWcKICAgICAgICB0cnk6CiAgICAgICAgICAgIHN1YnByb2Nlc3MucnVuKFsnZmZtcGVnJywgJy12ZXJzaW9uJ10sIAogICAgICAgICAgICAgICAgICAgICAgICAgY2FwdHVyZV9vdXRwdXQ9VHJ1ZSwgCiAgICAgICAgICAgICAgICAgICAgICAgICBjaGVjaz1UcnVlKQogICAgICAgICAgICBsb2dnZXIuaW5mbygi4pyFINiq2YUg2KfZhNi52KvZiNixINi52YTZiSBGRm1wZWciKQogICAgICAgIGV4Y2VwdCAoc3VicHJvY2Vzcy5DYWxsZWRQcm9jZXNzRXJyb3IsIEZpbGVOb3RGb3VuZEVycm9yKToKICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCLinYwgRkZtcGVnINi62YrYsSDZhdir2KjYqiEiKQogICAgICAgICAgICBsb2dnZXIuZXJyb3IoItin2YTYsdis2KfYoSDYqtir2KjZitiq2Ycg2KjYp9mE2KPZhdixOiBzdWRvIGFwdCBpbnN0YWxsIGZmbXBlZyIpCiAgICAgICAgICAgIGV4aXQoMSkKICAgICAgICAKICAgICAgICAjINin2YTYqtit2YLZgiDZhdmGINiq2YjZg9mGINin2YTYqNmI2KoKICAgICAgICBpZiBCT1RfVE9LRU4gPT0gIllPVVJfQk9UX1RPS0VOX0hFUkUiOgogICAgICAgICAgICBsb2dnZXIuZXJyb3IoIuKdjCDYp9mE2LHYrNin2KEg2KrYudiv2YrZhCBCT1RfVE9LRU4g2YHZiiDYp9mE2YPZiNivISIpCiAgICAgICAgICAgIGV4aXQoMSkKICAgICAgICAKICAgICAgICAjINiq2LTYutmK2YQg2KfZhNio2YjYqgogICAgICAgIGJvdCA9IFZpZGVvQ29tcHJlc3NvckJvdChCT1RfVE9LRU4pCiAgICAgICAgYm90LnJ1bigpCiAgICAgICAgCiAgICBleGNlcHQgS2V5Ym9hcmRJbnRlcnJ1cHQ6CiAgICAgICAgbG9nZ2VyLmluZm8oIlxu8J+RiyDYqtmFINil2YrZgtin2YEg2KfZhNio2YjYqiDYqNmI2KfYs9i32Kkg2KfZhNmF2LPYqtiu2K/ZhSIpCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgbG9nZ2VyLmVycm9yKGYi4p2MINiu2LfYoyDZgdin2K/YrToge2V9IiwgZXhjX2luZm89VHJ1ZSkKICAgICAgICBleGl0KDEpCg==",
}

# ÿ£ÿ≥ŸÖÿßÿ° ÿßŸÑÿ®Ÿàÿ™ÿßÿ™
BOTS_NAMES = {
    1: "2.py",
}

# ÿ™ÿ®ÿπŸäÿßÿ™ ŸÉŸÑ ÿ®Ÿàÿ™
BOTS_IMPORTS = {
}

def load_helper_files(bot_num):
    """ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸÖŸÑŸÅÿßÿ™ ÿßŸÑŸÖÿ≥ÿßÿπÿØÿ© ÿßŸÑÿ™Ÿä Ÿäÿ≠ÿ™ÿßÿ¨Ÿáÿß ÿßŸÑÿ®Ÿàÿ™"""
    if bot_num not in BOTS_IMPORTS:
        return
    
    for module_name in BOTS_IMPORTS[bot_num]:
        if module_name in HELPER_FILES:
            try:
                # ŸÅŸÉ ÿßŸÑÿ™ÿ¥ŸÅŸäÿ±
                code = base64.b64decode(HELPER_FILES[module_name]).decode("utf-8")
                
                # ÿ•ŸÜÿ¥ÿßÿ° module
                module = types.ModuleType(module_name)
                
                # ÿ™ŸÜŸÅŸäÿ∞ ÿßŸÑŸÉŸàÿØ
                exec(code, module.__dict__)
                
                # ÿ•ÿ∂ÿßŸÅÿ© ŸÑŸÑŸÜÿ∏ÿßŸÖ
                sys.modules[module_name] = module
                
                print(f"      ‚úì ÿ™ŸÖ ÿ™ÿ≠ŸÖŸäŸÑ {module_name}")
            except Exception as e:
                print(f"      ‚ùå ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ŸÖŸäŸÑ {module_name}: {e}")

def run_bot(bot_num):
    bot_name = BOTS_NAMES[bot_num]
    print(f"\nü§ñ ÿ™ÿ¥ÿ∫ŸäŸÑ: {bot_name}")
    bots_status[bot_num] = {"name": bot_name, "status": "starting"}
    try:
        # ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸÖŸÑŸÅÿßÿ™ ÿßŸÑŸÖÿ≥ÿßÿπÿØÿ©
        load_helper_files(bot_num)
        
        # ŸÅŸÉ ÿ™ÿ¥ŸÅŸäÿ± Ÿàÿ™ÿ¥ÿ∫ŸäŸÑ ÿßŸÑÿ®Ÿàÿ™
        code = base64.b64decode(BOTS_CODE[bot_num]).decode("utf-8")
        bots_status[bot_num]["status"] = "running"
        exec(code, {"__name__": "__main__"})
    except Exception as e:
        print(f"‚ùå ÿÆÿ∑ÿ£ ŸÅŸä {bot_name}: {e}")
        bots_status[bot_num]["status"] = "error"
        bots_status[bot_num]["error"] = str(e)
        import traceback
        traceback.print_exc()

def main():
    global start_time
    start_time = datetime.now()
    
    print("=" * 70)
    print("üöÄ ÿ™ÿ¥ÿ∫ŸäŸÑ 1 ÿ®Ÿàÿ™ ŸÖÿπ Flask")
    print("=" * 70)
    
    # ÿ™ÿ¥ÿ∫ŸäŸÑ Flask
    print("\nüåê ÿ™ÿ¥ÿ∫ŸäŸÑ Flask Server...")
    threading.Thread(target=run_flask, daemon=True).start()
    time.sleep(2)
    print("‚úÖ Flask ŸäÿπŸÖŸÑ")
    
    # ÿ™ÿ¥ÿ∫ŸäŸÑ ÿßŸÑÿ®Ÿàÿ™ÿßÿ™
    for bot_num in range(1, 2):
        threading.Thread(target=run_bot, args=(bot_num,), daemon=True).start()
        time.sleep(1.5)
    
    print("\n" + "=" * 70)
    print("‚úÖ ÿ¨ŸÖŸäÿπ ÿßŸÑÿ®Ÿàÿ™ÿßÿ™ ÿ™ÿπŸÖŸÑ!")
    print("üåê Flask: http://0.0.0.0:" + str(os.environ.get("PORT", 8080)))
    print("=" * 70)
    
    try:
        while True:
            time.sleep(1)
    except KeyboardInterrupt:
        print("\n‚õî ÿ™ŸàŸÇŸÅ")

if __name__ == "__main__":
    main()
